class Di{static set(e,t){if(""==e||void 0===e||""==t||void 0===t)throw'Key and value must not be empty in "Di"';void 0===Di.di&&(Di.di={}),Di.di[e]=t}static get(e){if(""==e||void 0===e)throw'Key must not be empty in "Di"';return Di.di[e]}static getAll(){return void 0===Di.di&&(Di.di={}),Di.di}}class Service{constructor(){this.di=Di}set(e,t){this.di.set(e,t)}get(e){return this.di.get(e)}}class Container{constructor(){this.container={}}set(e,t){this.container[e]=t}get(e){return this.container[e]}}class LocalStorage{constructor(){}set(e,t){localStorage.setItem(e,t)}get(e){return localStorage.getItem(e)}}class SessionStorage{constructor(){}set(e,t){sessionStorage.setItem(e,t)}get(e){return sessionStorage.getItem(e)}}class Injectable{getValidator(e=null){return{get:function(e,t){switch(t){case"em":return this.getDi().get("em");case"ajax":return this.getDi().get("ajax");case"dom":return this.getDi().get("dom");case"eventManager":return this.getDi().get("eventManager");case"uuid":return this.getDi().get("uuid");case"url":return this.getDi().get("url");case"setViewModel":case"getViewModel":default:return e[t]}}}}getDi(){return new Service}inject(e,t=null){return new Proxy(e,this.getValidator(t))}}class Url extends Service{constructor(){super()}getQuery(e=!1){0==e&&(e=document.URL);var t=e?e.split("?")[1]:window.location.search.slice(1),s={};if(t)for(var n=(t=t.split("#")[0]).split("&"),r=0;r<n.length;r++){var i=n[r].split("="),a=void 0,l=i[0].replace(/\[\d*\]/,function(e){return a=e.slice(1,-1),""}),o=void 0===i[1]||i[1];s[l]?("string"==typeof s[l]&&(s[l]=[s[l]]),void 0===a?s[l].push(o):s[l][a]=o):s[l]=o}return s}}class Scope{static get LOCAL(){return 0}static get DEV(){return 1}static get TEST(){return 2}static get QA(){return 3}static get STAGING(){return 4}static get PRODUCTION(){return 5}}class AppConfig{constructor(){this.config={}}setConfig(e,t=Scope.LOCAL){this.config[t]=e}getConfig(e=Scope.LOCAL){return this.config[e]}}class Message{static get NOT_VALID_ARRAY(){return"The object returned in the transaction is not array"}static get NOT_VALID_ARRAY_OBJECT(){return"The objects returned in the transaction into array are not objects, every row must be object key, value"}static get NOT_VALID_OBJECT(){return"The received variable is not an object"}static getCodeMessage(e,t){t=" => "+t;switch(e){case MessageCode.NOT_VALID_ARRAY:return Message.NOT_VALID_ARRAY+t;case MessageCode.NOT_VALID_ARRAY_OBJECT:return Message.NOT_VALID_ARRAY_OBJECT+t;case MessageCode.NOT_VALID_OBJECT:return Message.NOT_VALID_OBJECT+t}}}class MessageCode{static get NOT_VALID_ARRAY(){return 1}static get NOT_VALID_ARRAY_OBJECT(){return 2}static get NOT_VALID_OBJECT(){return 3}}class Uuid{constructor(){}static get(){return MathHelper.getS4()+MathHelper.getS4()+"-"+MathHelper.getS4()+"-"+MathHelper.getS4()+"-"+MathHelper.getS4()+"-"+MathHelper.getS4()+MathHelper.getS4()+MathHelper.getS4()}}class MathHelper{constructor(){}static getRandom(e,t){return Math.floor(Math.random()*t+e)}static getUUID(){return this.getS4()+this.getS4()+"-"+this.getS4()+"-"+this.getS4()+"-"+this.getS4()+"-"+this.getS4()+this.getS4()+this.getS4()}static getS4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}class StringHelper{constructor(){}static sanitizeString(e){let t=e.replace(/[`~!@#$%^&*()_|+\-=?;:"",.<>\{\}\[\]\\\/]/gi,"").toLowerCase();return t=t.toString().replace(/\s/g,"")}static capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}static ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static lcfirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}}class Validator{static validStructArray(e){try{if(Array.isArray(e)){if("object"==typeof e[0])return!0;throw Message.NOT_VALID_ARRAY_OBJECT}throw Message.NOT_VALID_ARRAY}catch(e){}}}class Transaction{constructor(){}get(e){}}class ComparisonOperators{static get AND(){return"&&"}static get OR(){return"||"}static get EQUAL(){return"=="}static get DIFFERENT(){return"!="}}class DataType{static get BOOLEAN(){return 1}static get INTEGER(){return 2}static get STRING(){return 3}static get OBJECT(){return 4}static get ARRAY(){return 5}static get CLASS(){return 6}static get BOOLEAN_TYPE(){return"boolean"}static get INTEGER_TYPE(){return"number"}static get STRING_TYPE(){return"string"}static get OBJECT_TYPE(){return"object"}static getValueByType(e){switch(typeof e){case DataType.STRING_TYPE:e='"'+e+'"'}return e}}class Group extends Transaction{constructor(){super()}get(){}}class Gt extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]>this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var r=1;r<=s;r++)if(0==t[r])return!1;return!0}}class Gte extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]>=this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var r=1;r<=s;r++)if(0==t[r])return!1;return!0}}class In extends Transaction{constructor(e){if(super(),this.condition=new Array,"object"!=typeof e)throw"Not condition must be an object";for(var t in e){if(!(e[t]instanceof Array))throw"Not in value should be array";var s=e[t];for(var n in s){var r=DataType.getValueByType(s[n]);this.conditions.push('row["'+t+'"] == '+r)}}}get(){return"("+this.conditions.join(" || ")+")"}}class Like extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){new Array,Object.keys(this.condition).length;for(var t in this.condition){if(""!=this.condition[t]&&"string"==typeof e[t])return!!new RegExp(this.condition[t],"i").test(e[t].replace(/([^a-z_0-9\s]+)/gi,""))}return!1}}class Lt extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]<this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var r=1;r<=s;r++)if(0==t[r])return!1;return!0}}class Lte extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]<=this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var r=1;r<=s;r++)if(0==t[r])return!1;return!0}}class Not extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]==this.condition[n]&&t.push(!0);for(var r=0;r<s;r++)if(1==t[r])return!1;return!0}}class NotIn extends Transaction{constructor(e){if(super(),this.condition=new Array,"object"!=typeof e)throw"Not condition must be an object";for(var t in e){if(!(e[t]instanceof Array))throw"Not in value should be array";var s=e[t];for(var n in s){var r=DataType.getValueByType(s[n]);this.conditions.push('row["'+t+'"] != '+r)}}}get(){return"("+this.conditions.join(" && ")+")"}}class Operators{static get OR(){return"$or"}static get AND(){return"$and"}static get SORT(){return"$sort"}static get IS_NOT(){return"$isNot"}static get LIMIT(){return"$limit"}static get COLUMNS(){return"$columns"}static get CONDITIONAL(){return"$conditions"}}class Or extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in this.condition instanceof Transaction&&t.push(this.condition.get(e)),e)this.condition[n]instanceof Transaction?t.push(this.condition[n].get(e)):e[n]==this.condition[n]&&t.push(!0);for(let e=0;e<s;e++)if(1==t[e])return!0;return!1}}class QSort{static get ASC(){return 1}static get DESC(){return-1}static sortByField(e,t){var s=[];for(var n in e){if(e.hasOwnProperty(n))(l={})[n]=e[n],l.tempSortName=e[n][t].toLowerCase(),s.push(l)}s.sort(function(e,t){var s=e.tempSortName,n=t.tempSortName;return s>n?1:s<n?-1:0});for(var r=[],i=0,a=s.length;i<a;i++){var l=s[i];for(var n in delete l.tempSortName,l)if(l.hasOwnProperty(n))var o=n;var c=l[o];r.push(c)}return r}}class Query{constructor(e=!1){this.data=e,this.lim=null,this.sort=new Array,this.cols=new Array,this.conds=null,this.sortConds=!1,this.transactions=new Array,this.negativeConds=null,tjis.negativeTransactions=new Array}columns(e){if("object"!=typeof e)throw"Column param must be an object";return this.cols=e,this}getColumns(){return Object.keys(this.data[0])}resolveColumns(e){var t={};if(Object.keys(this.cols).length>0)for(let s in this.cols)t[this.cols[s]]=e[this.cols[s]];else t=Object.keys(e);return t}where(e){return e instanceof Transaction&&(e instanceof Not||e instanceof NotIn?(this.negativeTransactions.push(e),this.negativeConds++):(this.transactions.push(e),this.conds++)),this}limit(e){if("number"!=typeof e)throw"limit must be number";return this.lim=e,this}addOperator(e,t){var s="";return e>0&&(s=t+" "),s}orderBy(e){this.sort=e,this.sortConds=!0}resolveSort(e){switch(typeof this.sort){case DataType.STRING_TYPE:e=QSort.sortByField(e,this.sort);break;case DataType.OBJECT_TYPE:if(this.sort instanceof Array)for(let t in this.sort){let s=this.sort[t];e=QSort.sortByField(e,s)}else for(let t in this.sort){this.sort[t];e=QSort.sortByField(e,t),this.sort[t]==QSort.DESC&&(e=e.reverse())}}return e}miniChecksum(e){var t=JSON.stringify(e),s=0;if(0==t.length)return s;for(var n=0;n<t.length;n++)s=(s<<5)-s+t.charCodeAt(n),s&=s;return s}ifExistOnResult(e,t){for(var s in e)if(this.miniChecksum(e[s])==this.miniChecksum(t))return!1;return!0}get(){var e=new Array,t=1;for(var s in this.data){var n=this.data[s];if(null!=this.cols&&this.cols.length>0&&(n=this.resolveColumns(n)),this.conds>0)for(var s in this.transactions){this.transactions[s].get(n)&&this.ifExistOnResult(e,n)&&e.push(n)}else e.push(n);if(null!=this.lim&&t==this.lim)break;t++}var r=new Array;for(var s in e){n=e[s];if(this.negativeConds>0)for(var s in this.negativeTransactions){this.negativeTransactions[s].get(n)&&this.ifExistOnResult(r,n)&&r.push(n)}else r.push(n)}return this.sortConds&&(r=this.resolveSort(r)),r}}class RawModel{constructor(){this.state=1,this.identify=Uuid.get(),this.modelName=this.getClassName()}initialize(){}setModelName(e){this.modelName=e}getModelName(){return this.constructor.name}getClassName(){return this.constructor.name}getIdentify(){return this.identify}}class StaticModel extends RawModel{constructor(e){super(),this.storage=new SessionStorage,this.initialize()}setData(e){this.storage.set("Models_Identify_"+this.getClassName(),JSON.stringify(e))}getData(){return this.storage.get("Models_Identify_"+this.getClassName())}getObjectData(){return JSON.parse(this.storage.get("Models_Identify_"+this.getClassName()))}setIndex(e){this.index=e}getIndex(){return this.index}}class AjaxModel extends RawModel{constructor(){super(),this.insertUrl="insert",this.deleteUrl="delete",this.updateUrl="update",this.findUrl="find",this.findOneUrl="findOne",this.countUrl="count",this.method="POST",this.initialize()}getClassName(){return this.constructor.name}setSource(e){this.setInsertUrl(e.insert),this.setUpdateUrl(e.update),this.setInsertUrl(e.insert),this.setCountUrl(e.count),this.setFindOneUrl(e.findOne),this.setFindUrl(e.find)}setInsertUrl(e){this.insertUrl=e}setFindUrl(e){this.findUrl=e}setFindOneUrl(e){this.findOneUrl=e}setCountUrl(e){this.countUrl=e}setDeleteUrl(e){this.deleteUrl=e}setUpdateUrl(e){this.updateUrl=e}getInsertUrl(){return this.insertUrl}getFindUrl(){return this.findUrl}getDeleteUrl(){return this.deleteUrl}getUpdateUrl(){return this.updateUrl}setParams(e){this.params=e}getParams(){return this.params}setMethod(e){this.method=e}getMethod(){return this.method}}class AjaxModelPersistent extends StaticModel{constructor(){super(),this.container=new SessionStorage,this.insertUrl=null,this.deleteUrl=null,this.updateUrl=null,this.findUrl=null}setSource(e){this.setInsertUrl(e.find),this.setUpdateUrl(e.update),this.setInsertUrl(e.insert),this.setFindUrl(e.insert)}setAjaxInit(e){this.container.set("ajaxInit_"+this.getClassName(),e)}getAjaxInit(){return this.container.get("ajaxInit_"+this.getClassName())}setInsertUrl(e){this.insertUrl=e}setFindUrl(e){this.findUrl=e}setDeleteUrl(e){this.deleteUrl=e}setUpdateUrl(e){this.updateUrl=e}getInsertUrl(){return this.insertUrl}getFindUrl(){return this.findUrl}getDeleteUrl(){return this.deleteUrl}getUpdateUrl(){return this.updateUrl}setParams(e){this.params=e}getParams(){return this.params}setMethod(e){this.method=e}getMethod(){return this.method}}class Deny{static getDeny(){return["state","source","insertUrl","deleteUrl","updateUrl","findUrl","params","internalId","method"]}}class ModelType{}ModelType.AJAX=0,ModelType.PERSISTENT=1,ModelType.OBJECT=2,ModelType.ARRAY=3;class ElementAdapter{constructor(e=null){this.element=e}setElement(e){return this.element=e,this}get(){let e;if("string"!=typeof this.element){if(void 0===this.element.nodeName)return!1;e=this.element.nodeName}else e=this.element.toUpperCase();let t=!1;switch(e){case"A":t=new A;break;case"ABBR":t=new Abbr;break;case"ADDRESS":t=new Address;break;case"AREA":t=new Area;break;case"ARTICLE":t=new Article;break;case"ASIDE":t=new Aside;break;case"AUDIO":t=new Audio;break;case"B":t=new B;break;case"BASE":t=new Base;break;case"BDI":t=new Bdi;break;case"BDO":t=new Bdo;break;case"BLOCKQUOTE":t=new Blockquote;break;case"BODY":t=new Body;break;case"BR":t=new Br;break;case"BUTTON":t=new Button;break;case"CANVAS":t=new Canvas;break;case"CAPTION":t=new Caption;break;case"CITE":t=new Cite;break;case"CODE":t=new Code;break;case"COL":t=new Col;break;case"COLGROUP":t=new ColGroup;break;case"DATALIST":t=new Datalist;break;case"DB":t=new Db;break;case"DEL":t=new Del;break;case"DETAILS":t=new Details;break;case"DFN":t=new Dfn;break;case"DIALOG":t=new Dialog;break;case"DIV":t=new Div;break;case"DL":t=new Dl;break;case"DT":t=new Dt;break;case"EM":t=new Em;break;case"EMBED":t=new Embed;break;case"FIELDSET":t=new Fieldset;break;case"FIGCAPTION":t=new Figcaption;break;case"FIGURE":t=new Figure;break;case"FOOTER":t=new Footer;break;case"FORM":t=new Form;break;case"H1":t=new H1;break;case"H2":t=new H2;break;case"H3":t=new H3;break;case"H4":t=new H4;break;case"H5":t=new H5;break;case"H6":t=new H6;break;case"HEAD":t=new Head;break;case"HEADER":t=new Header;break;case"I":t=new I;break;case"IFRAME":t=new Iframe;break;case"IMG":t=new Img;break;case"INPUT":t=new Input;break;case"INS":t=new Ins;break;case"KBD":t=new Kbd;break;case"KEYGEN":t=new Keygen;break;case"LABEL":t=new Label;break;case"LEYEND":t=new Leyend;break;case"LI":t=new Li;break;case"LINK":t=new Link;break;case"MAIN":t=new Main;break;case"MENU":t=new Menu;break;case"MENUITEM":t=new Menuitem;break;case"META":t=new Meta;break;case"METER":t=new Meter;break;case"NAV":t=new Nav;break;case"NOSCRIP":t=new Noscrip;break;case"OBJECT":t=new Obj;break;case"OL":t=new Ol;break;case"OPTGROUP":t=new Optgroup;break;case"P":t=new P;break;case"PARAM":t=new Param;break;case"PRE":t=new Pre;break;case"PROGRESS":t=new Progress;break;case"Q":t=new Q;break;case"RP":t=new Rp;break;case"RT":t=new Rt;break;case"RUBY":t=new Ruby;break;case"S":t=new S;break;case"SAMP":t=new Samp;break;case"SCRIPT":t=new Script;break;case"SECTION":t=new Section;break;case"SELECT":t=new Select;break;case"SMALL":t=new Small;break;case"SOURCE":t=new Source;break;case"SPAN":t=new Span;break;case"STRONG":t=new Strong;break;case"STYLE":t=new Style;break;case"SUB":t=new Sub;break;case"SUMMARY":t=new Summary;break;case"SUP":t=new Sup;break;case"TABLE":t=new Table;break;case"TBODY":t=new Tbody;break;case"TD":t=new Td;break;case"TEXTAREA":t=new Textarea;break;case"TFOOT":t=new Tfoot;break;case"TH":t=new Th;break;case"THEAD":t=new Thead;break;case"TIME":t=new Time;break;case"TITLE":t=new Title;break;case"TR":t=new Tr;break;case"TRACK":t=new Track;break;case"U":t=new U;break;case"UL":t=new Ul;break;case"VAR":t=new Var;break;case"VIDEO":t=new Video;break;case"WBR":t=new Wbr;break;default:(t=new HtmlElement).create(this.element)}return void 0!==this.element.nodeName&&t.setElement(this.element),t}}class ElementManager{constructor(){}setElement(e){this.element=e}getElement(){return this.element}getClassName(){let e=/function (.{1,})\(/.exec(this.constructor.toString());return e&&e.length>1?e[1]:""}setId(e){return this.attr("id",e),this}getId(){return this.attr("id")}setRequired(e){return this.element.required=e,this}getRequired(){return this.element.required}checkAppendValue(e){switch(typeof e){case"string":this.element.appendChild(document.createTextNode(e));break;case"number":this.element.appendChild(document.createTextNode(e.toString()));break;case"object":void 0!==e.getElement()?this.verifyElement(e.getElement()):this.verifyElement(e)}}verifyElement(e,t="append"){if(this.element instanceof HTMLCollection)for(let t in this.element)void 0!==this.element[t].nodeType&&1==this.element[t].nodeType&&this.element[t].appendChild(e);else this.element.appendChild(e)}append(e){if(Array.isArray(e)||e instanceof HTMLCollection)for(let t in e)this.checkAppendValue(e[t]);else this.checkAppendValue(e);return this}class(e){return this.element.setAttribute("class",e),this}addClass(e){let t=this.element.getAttribute("class");return t+=" "+e,this.element.setAttribute("class",t),this}attr(e,t=!1){if("object"==typeof e&&0==t)for(let t in e)this.element.setAttribute(t,e[t]);else if("string"==typeof e&&0!=t)this.element.setAttribute(e,t);else if("string"==typeof e&&0==t)return this.element.getAttribute(e);return this}removeAttr(e){return this.element.removeAttribute(e),this}html(e=null){return null!=e?(this.removeChildNodes(),this.append(e),this):this.element.innerHTML}setHtml(e=null){return null?(this.removeChildNodes(),this.append(null),this):this.element.innerHTML}removeChildNodes(){if(this.element instanceof HTMLCollection)for(let e in this.element)this.removeChilds(this.element[e],this.element[e].childNodes);else this.removeChilds(this.element,this.element.childNodes)}removeChilds(e,t){for(;e.firstChild;)e.removeChild(e.firstChild)}val(e=!1){return e||"string"==typeof e?(this.element.value=e,this.attr("value",e),this):this.element.value}getValue(e=!1){return e||"string"==typeof e?(this.element.value=e,this.attr("value",e),this):this.element.value}valAsInt(){return parseInt(this.val())}text(e=!1){return e?(this.element.innerHtml=e,this):this.element.innerHtml}empty(){return this.removeChildNodes(),this}remove(e=!1){e?this.getElement().removeChild(e):this.getElement().parentElement.removeChild(this.getElement())}getAsObject(){let e=this.element.childNodes,t=new Array;if(e instanceof NodeList)for(let s in e)if(void 0!==e[s].nodeType)switch(e[s].nodeType){case Node.ELEMENT_NODE:let n=new ElementAdapter(e[s]).get(),r={},i=n.getAsObject();r[n.getClassName().toLowerCase()]=i,i.length>0&&t.push(r);break;case Node.TEXT_NODE:t.push(e[s].nodeValue)}return t}getAsJson(){let e=this.getAsObject();return JSON.stringify(e)}}class CssManager{constructor(){}setElement(e){return this.element=e,this}getElement(){return this.element}css(e,t=null){if("object"==typeof e)for(let t in e)this.element.style[e]=e[t];else if("string"==typeof e&&null!=t)this.element.style[e]=t;else if("string"==typeof e&&null==t)return this.element.style[e];return this}setStyle(e,t=null){if("object"==typeof e)for(let t in e)this.element.style[e]=e[t];else if("string"==typeof e&&null!=t)this.element.style[e]=t;else if("string"==typeof e&&null==t)return this.element.style[e];return this}class(e){return this.element.setAttribute("class",e),this}setClass(e){return this.element.setAttribute("class",e),this}addClass(e){let t=this.element.getAttribute("class");return t+=" "+e,this.element.setAttribute("class",t),this}addChild(e){return this.element.append(e),this}show(){return this.element.style.display="",this}hide(){return this.element.style.display="none",this}}class DomManager{constructor(){}getById(e,t=null){return new ElementAdapter(document.getElementById(e)).get()}create(e){return new ElementAdapter(e).get()}getByTag(e){let t=document.getElementsByTagName(e),s=new Array;for(let e in t)if("string"==typeof t[e].nodeName){let n=new ElementAdapter(t[e]);s.push(n.get())}return 0!=s.length&&(1==s.length?s[0]:s)}getByClass(e,t=null){let s=document.getElementsByClassName(e),n=new Array;for(let e in s)if("string"==typeof s[e].nodeName){let t=new ElementAdapter(s[e]);n.push(t.get())}return 0!=n.length&&(1==n.length?n[0]:this)}getByName(e,t=null){let s=document.getElementsByName(e),n=new Array;for(let e in s)if("string"==typeof s[e].nodeName){let t=new ElementAdapter(s[e]);n.push(t.get())}return 0!=n.length&&(1==n.length?n[0]:n)}setElement(e){return this.element=e,this}getElement(){return this.element}getClassName(){let e=/function (.{1,})\(/.exec(this.constructor.toString());return e&&e.length>1?e[1]:""}}class EventManager{constructor(){this.components={},this.eventNow={}}attach(e,t,s){Array.isArray(this.components[e])||(this.components[e]=new Array),Array.isArray(this.components[e][t])||(this.components[e][t]=new Array),this.components[e][t].push(s)}fire(e,t,s){let n=this.components[e][t];if(Array.isArray(n))for(let e of n)e(s)}set(e,t,s){this.eventNow[e]={},this.eventNow[e][t]=s}execute(e,t,s){let n=this.eventNow[e][t];"function"==typeof n&&n(s)}clear(e,t){this.components[e][t]=new Array}static getEvents(){return["click","doubleClick","change","keypress","keydown","keyup","paste","blur","focus","submit"]}setEventToElement(e,t,s,n=!1){if(Array.isArray(e))for(let n of e)this.element.addEventListener(t,s);else e.addEventListener(t,function(){let e=Di.get("elementAdapter").setElement(this).get();s.bind(n)(e)});return this}getEventManager(){return this.getDi().get("eventManager")}getDi(){return Di}getDom(){return this.getDi().get("dom")}getEm(){return this.getDi().get("em")}}class ParentManager{constructor(){}getParent(){let e=this.element.parentElement;if(1==e.nodeType){return new ElementAdapter(e).get()}return!1}getSiblings(){let e=this.getParent().getChilds();if(e.length>0){let t=new Array;for(let s of e)s.getElement()!=this.getElement()&&t.push(s);return t}return!1}getChilds(){let e=this.element.childNodes,t=new Array;for(let s in e)if(1==e[s].nodeType){let n=new ElementAdapter(e[s]).get();t.push(n)}return t}setElement(e){return this.element=e,this}getElement(){return this.element}}class EventType{static get BEFORE_SEND(){return 0}static get AFTER_SEND(){return 1}static get DONE(){return 2}static get ERROR(){return 3}static get BEFORE_CREATE(){return 4}static get AFTER_CREATE(){return 5}static get BEFORE_CREATE_VIEW(){return 6}static get AFTER_CREATE_VIEW(){return 7}static get EXCEPTION(){return 8}static get BEFORE_SEND_NAME(){return"beforeSend"}static get AFTER_SEND_NAME(){return"afterSend"}static get DONE_NAME(){return"done"}static get ERROR_NAME(){return"error"}static get BEFORE_CREATE_NAME(){return"beforeCreate"}static get AFTER_CREATE_NAME(){return"afterCreate"}static get BEFORE_CREATE_VIEW_NAME(){return"beforeCreateView"}static get AFTER_CREATE_VIEW_NAME(){return"afterCreateView"}static get EXCEPTION_NAME(){return"exception"}}class HtmlElement{constructor(){this.CSS_MANAGER="Chronos.Dom.CssManager",this.PARENT_MANAGER="Chronos.Dom.DomManager",this.ELEMENT_MANAGER="Chronos.Dom.ElementManager",this.di=Di,this.data=new ViewModel}initialize(e){}setData(e){this.data=e}getData(){return this.data}setElement(e){return this.element=e,this}getElement(){return this.element}getCss(){let e=this.getDi().get(this.CSS_MANAGER);return e.setElement(this.getElement()),e}getParent(){let e=this.element.parentElement;if(1==e.nodeType){return new ElementAdapter(e).get()}return!1}getSiblings(){let e=this.getParent().getChilds();if(e.length>0){let t=new Array;for(let s of e)s.getElement()!=this.getElement()&&t.push(s);return t}return!1}getChilds(){let e=this.element.childNodes,t=new Array;for(let s in e)if(1==e[s].nodeType){let n=new ElementAdapter(e[s]).get();t.push(n)}return t}css(e,t=null){if("object"==typeof e)for(let t in e)this.element.style[e]=e[t];else if("string"==typeof e&&null!=t)this.element.style[e]=t;else if("string"==typeof e&&null==t)return this.element.style[e];return this}setStyle(e,t=null){if("object"==typeof e)for(let t in e)this.element.style[e]=e[t];else if("string"==typeof e&&null!=t)this.element.style[e]=t;else if("string"==typeof e&&null==t)return this.element.style[e];return this}class(e){return this.element.setAttribute("class",e),this}setClass(e){return this.element.setAttribute("class",e),this}addClass(e){let t=this.element.getAttribute("class");return t+=" "+e,this.element.setAttribute("class",t),this}addChild(e){return this.element.append(e),this}show(){return this.element.style.display="",this}hide(){return this.element.style.display="none",this}setId(e){return this.attr("id",e),this}getId(){return this.attr("id")}setRequired(e){return this.element.required=e,this}getRequired(){return this.element.required}checkAppendValue(e){switch(typeof e){case"string":this.element.appendChild(document.createTextNode(e));break;case"number":this.element.appendChild(document.createTextNode(e.toString()));break;case"object":void 0!==e.getElement()?this.verifyElement(e.getElement()):this.verifyElement(e)}}verifyElement(e,t="append"){if(this.element instanceof HTMLCollection)for(let t in this.element)void 0!==this.element[t].nodeType&&1==this.element[t].nodeType&&this.element[t].appendChild(e);else this.element.appendChild(e)}append(e){if(Array.isArray(e)||e instanceof HTMLCollection)for(let t in e)this.checkAppendValue(e[t]);else this.checkAppendValue(e);return this}class(e){return this.element.setAttribute("class",e),this}addClass(e){let t=this.element.getAttribute("class");return t+=" "+e,this.element.setAttribute("class",t),this}attr(e,t=!1){if("object"==typeof e&&0==t)for(let t in e)this.element.setAttribute(t,e[t]);else if("string"==typeof e&&0!=t)this.element.setAttribute(e,t);else if("string"==typeof e&&0==t)return this.element.getAttribute(e);return this}removeAttr(e){return this.element.removeAttribute(e),this}html(e=null){return null!=e?(this.removeChildNodes(),this.append(e),this):this.element.innerHTML}setHtml(e=null){return null?(this.removeChildNodes(),this.append(null),this):this.element.innerHTML}removeChildNodes(){if(this.element instanceof HTMLCollection)for(let e in this.element)this.removeChilds(this.element[e],this.element[e].childNodes);else this.removeChilds(this.element,this.element.childNodes)}removeChilds(e,t){for(;e.firstChild;)e.removeChild(e.firstChild)}val(e=!1){return e||"string"==typeof e?(this.element.value=e,this.attr("value",e),this):this.element.value}getValue(e=!1){return e||"string"==typeof e?(this.element.value=e,this.attr("value",e),this):this.element.value}valAsInt(){return parseInt(this.val())}text(e=!1){return e?(this.element.innerHtml=e,this):this.element.innerHtml}empty(){return this.removeChildNodes(),this}remove(e=!1){e?this.getElement().removeChild(e):this.getElement().parentElement.removeChild(this.getElement())}getAsObject(){let e=this.element.childNodes,t=new Array;if(e instanceof NodeList)for(let s in e)if(void 0!==e[s].nodeType)switch(e[s].nodeType){case Node.ELEMENT_NODE:let n=new ElementAdapter(e[s]).get(),r={},i=n.getAsObject();r[n.getClassName().toLowerCase()]=i,i.length>0&&t.push(r);break;case Node.TEXT_NODE:t.push(e[s].nodeValue)}return t}getAsJson(){let e=this.getAsObject();return JSON.stringify(e)}create(e){return this.element=document.createElement(e),this}getChecksum(){let e=this.getClassName()+JSON.stringify(this);return window.btoa(encodeURIComponent(e))}getDom(){return this.getDi().get("dom")}getEventManager(){return this.getDi().get("eventManager")}getEm(){return this.getDi().get("em")}addEvent(e,t){return this.getEventManager().setEventToElement(this.element,e,t,data),this}click(e,t=!1){return this.getEventManager().setEventToElement(this.element,"click",e,t),this}doubleClick(e,t=!1){return this.getEventManager().setEventToElement(this.element,"doubleClick",e,t),this}change(e,t=!1){return this.getEventManager().setEventToElement(this.element,"change",e,t),this}keypress(e,t=!1){return this.getEventManager().setEventToElement(this.element,"keypress",e,t),this}keydown(e,t=!1){return this.getEventManager().setEventToElement(this.element,"keydown",e,t),this}keyup(e,t=!1){return this.getEventManager().setEventToElement(this.element,"keyup",e,t),this}paste(e,t=!1){return this.getEventManager().setEventToElement(this.element,"paste",e,t),this}blur(e,t=!1){return this.getEventManager().setEventToElement(this.element,"blur",e,t),this}focus(e,t=!1){return this.getEventManager().setEventToElement(this.element,"focus",e,t),this}submit(e,t=!1){return this.getEventManager().setEventToElement(this.element,"submit",e,t),this}setDi(e){return this.di=e,this}getDi(){return this.di}}class FormTag extends HtmlElement{setReadOnly(e){return this.getElement().readOnly=e,this}getReadOnly(){return this.getElement().readOnly}setDisabled(e){return this.getElement().disabled=e,this}getDisabled(){return this.getElement().disabled}setSize(e){return this.attr("size",e),this}getSize(){return this.attr("size")}setMaxLength(e){return this.attr("maxlength",e),this}getMaxLength(){return this.attr("maxlength")}setAutoFocus(e){return this.getElement().autofocus=e,this}getAutoFocus(){return this.getElement().autofocus}setMin(e){return this.attr("min",e),this}getMin(){return parseInt(this.attr("min"))}setMax(e){return this.attr("max",e),this}getMax(){return parseInt(this.attr("max"))}setAlt(e){return this.attr("alt",e),this}getAlt(){return this.attr("alt")}setPlaceholder(e){return this.attr("placeholder",e),this}getPlaceholder(){return this.attr("placeholder")}setTitle(e){return this.attr("title",e),this}getTitle(){return this.attr("title")}setPattern(e){switch(e){case Input.NUMBERS:this.attr("pattern","[0-9]");break;case Input.TEXT:this.attr("pattern","[A-Za-z]{3}");break;case Input.NO_SPECIAL_CHARACTERS:this.attr("pattern","{3}");break;case Input.NUMBERS_NO_SPECIAL_CHARACTERS:this.attr("pattern","[0-9]{3}");break;case Input.TEXT_NO_SPECIAL_CHARACTERS:this.attr("pattern","[A-Za-z]{3}");break;default:this.attr("pattern",e)}return this}getPattern(){return this.attr("pattern")}setName(e){return this.attr("name",e),this}getName(){return this.attr("name")}setStep(e){return this.attr("step",e),this}getStep(){return this.attr("step")}validate(e=!1){if(""==this.val()||void 0===this.val())return!1}isChecked(){return this.getElement().checked}check(){return this.getElement().checked=!0,this}unCheck(){return this.getElement().checked=!1,this}}class A extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("A")),this.initialize())}favIcon(e){let t=(new I).class(e);return this.append(t.getElement()),this}href(e){return this.attr("href",e),this}}class Abbr extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("ABBR")),this.initialize())}}class Address extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("ADDRESS")),this.initialize())}}class Area extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("AREA")),this.initialize())}}class Article extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("ARTICLE")),this.initialize())}}class Aside extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("ASIDE")),this.initialize())}}class Audio extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("AUDIO")),this.initialize())}}class B extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("B")),this.initialize())}}class Base extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("BASE")),this.initialize())}}class Bdi extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("BDI")),this.initialize())}}class Bdo extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("BDO")),this.initialize())}}class Blockquote extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("BLOCKQUOTE")),this.initialize())}}class Body extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.body),this.initialize())}}class Br extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("BR")),this.initialize())}}class Button extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("BUTTON")),this.initialize())}type(e){return this.attr("type",e),this}favIcon(e){let t=(new I).class(e);return this.append(t),this}success(){return this.addClass("btn btn-success"),this}notice(){return this.addClass("btn btn-notice"),this}default(){return this.addClass("btn btn-default"),this}primary(){return this.addClass("btn btn-primary"),this}warning(){return this.addClass("btn btn-warning"),this}danger(){return this.addClass("btn btn-danger"),this}}class Canvas extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("CANVAS")),this.initialize())}}class Caption extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("CAPTION")),this.initialize())}}class Cite extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("CITE")),this.initialize())}}class Code extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("CODE")),this.initialize())}}class Col extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("COL")),this.initialize())}}class ColGroup extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("COLGROUP")),this.initialize())}}class Datalist extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DATALIST")),this.initialize())}}class Db extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DB")),this.initialize())}}class Del extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DEL")),this.initialize())}}class Details extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DETAILS")),this.initialize())}}class Dfn extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DFN")),this.initialize())}}class Dialog extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DIALOG")),this.initialize())}}class Div extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DIV")),this.initialize())}}class Dl extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DL")),this.initialize())}}class Dt extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("DT")),this.initialize())}}class Em extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("EM")),this.initialize())}}class Embed extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("EMBED")),this.initialize())}}class Fieldset extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("FIELDSET")),this.initialize())}}class Figcaption extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("FIGCAPTION")),this.initialize())}}class Figure extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("FIGURE")),this.initialize())}}class Footer extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("FOOTER")),this.initialize())}}class Form extends HtmlElement{constructor(e){super(),this.invalidElements=new Array,void 0===e&&(this.setElement(document.createElement("FORM")),this.initialize())}submit(e){this.getElement().addEventListener("submit",function(t){let s=e.bind(this)(t);return 0!=s&&void 0!==s||t.preventDefault(),!0}.bind(this))}getInvalidElements(){return this.invalidElements}validate(e){let t=this.getFormElements();if(this.invalidElements=new Array,t.length>0){for(let e of t)""==e.val()&&this.invalidElements.push(e);return 0==this.invalidElements.length}return!1}getFormElements(){let e=new Array,t=this.getElement().elements;for(let s of t){let t=new ElementAdapter(s).get();0!=t&&e.push(t)}return e}setAutoComplete(e){return e?this.attr("autocomplete","on"):this.attr("autocomplete","off"),this}getAutoComplete(){return this.attr("autocomplete")}}class H1 extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("H1")),this.initialize())}}class H2 extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("H2")),this.initialize())}}class H3 extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("H3")),this.initialize())}}class H4 extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("H4")),this.initialize())}}class H5 extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("H5")),this.initialize())}}class H6 extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("H6")),this.initialize())}}class Head extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("HEAD")),this.initialize())}}class Header extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("HEADER")),this.initialize())}}class Hidden extends Input{constructor(e){super(),this.setHidden()}}class Hr extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("HR")),this.initialize())}}class I extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("I")),this.initialize())}}class Iframe extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("IFRAME")),this.initialize())}}class Img extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("IMG")),this.initialize())}width(e){return this.getElement().style.width=e,this}height(e){return this.getElement().style.width=e,this}src(e){return this.attr("src",e),this}}class Input extends FormTag{static get NUMBERS(){return 0}static get TEXT(){return 1}static get NO_SPECIAL_CHARACTERS(){return 2}static get TEXT_NO_SPECIAL_CHARACTERS(){return 3}static get NUMBERS_NO_SPECIAL_CHARACTERS(){return 4}constructor(e){super(),void 0===e&&(this.setElement(document.createElement("INPUT")),this.initialize())}type(e){return this.attr("type",e),this}setText(){return this.attr("type","text"),this}setHidden(){return this.attr("type","hidden"),this}setNumber(){return this.attr("type","number"),this}setDate(){return this.attr("type","number"),this}setFile(){return this.attr("type","file"),this}}class Ins extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("INS")),this.initialize())}}class Kbd extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("KBD")),this.initialize())}}class Keygen extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("KEYGEN")),this.initialize())}}class Label extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("LABEL")),this.initialize())}}class Leyend extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("LEYEND")),this.initialize())}}class Li extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("LI")),this.initialize())}}class Link extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("LINK")),this.initialize())}}class Main extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("MAIN")),this.initialize())}}class Map extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("MAP")),this.initialize())}}class Menu extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("MENU")),this.initialize())}}class Menuitem extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("MENUITEM")),this.initialize())}}class Meta extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("META")),this.initialize())}}class Meter extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("METER")),this.initialize())}}class Nav extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("NAV")),this.initialize())}}class Noscrip extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("NOSCRIP")),this.initialize())}}class Obj extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("OBJECT")),this.initialize())}}class Ol extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("OL")),this.initialize())}}class Optgroup extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("OPTGROUP")),this.initialize())}}class Option extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("OPTION")),this.initialize())}setValue(e){return this.attr("value",e),this}getValue(){return this.attr("value")}setContent(e){return this.append(e),this}getContent(){return this.getElement().text}}class Output extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("OUTPUT")),this.initialize())}}class P extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("P")),this.initialize())}}class Param extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("PARAM")),this.initialize())}}class Pre extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("PRE")),this.initialize())}}class Progress extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("PROGRESS")),this.initialize())}}class Q extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("Q")),this.initialize())}}class Rp extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("RP")),this.initialize())}}class Rt extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("RT")),this.initialize())}}class Ruby extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("RUBY")),this.initialize())}}class S extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("S")),this.initialize())}}class Samp extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SAMP")),this.initialize())}}class Script extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("ABBR")),this.initialize())}}class Section extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SECTION")),this.initialize())}}class Select extends FormTag{constructor(e){super(),this.choose="Choose...",void 0===e&&(this.setElement(document.createElement("SELECT")),this.initialize())}getSelected(){var e=new Option;return e.setElement(this.getElement().options[this.getElement().selectedIndex]),e}iterate(e){var t=this.getChilds();for(var s in t)e(t[s]);return this}addChoose(e){this.choose=e}select(e){var t=this.getElement().childNodes;for(var s in t)t[s].value==e&&t[s].setAttribute("selected","selected")}fetch(e,t=!1){if(Array.isArray(e))for(let s in e)if(e[s]instanceof RawModel){if(0==t)throw"params are mandatory!";let n=e[s];this.append((new Option).attr({value:n[t[0]]}).html(n[t[1]]))}else this.append((new Option).attr({value:s}).html(e[s]));return this}}class Small extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SMALL")),this.initialize())}}class Source extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("ABBR")),this.initialize())}}class Span extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SPAN")),this.initialize())}}class Strong extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("STRONG")),this.initialize())}}class Style extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("STYLE")),this.initialize())}}class Sub extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SPAN")),this.initialize())}}class Summary extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SUMMARY")),this.initialize())}}class Sup extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("SUP")),this.initialize())}}class Table extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TABLE")),this.initialize()),this.thead=new Thead,this.tbody=new Tbody,this.tfoot=new Tfoot,this.initialize(args)}getThead(){return this.thead}getTbody(){return this.tbody}toHead(e){return this.thead.append(e),this.append(this.thead),this}toHeadTr(e){let t=new Tr;return t.append(e),this.thead.append(t),this.append(this.thead),this}toBody(e){return this.tbody.append(e),this.append(this.tbody),this}toFoot(e){return this.tfoot.append(e),this.append(this.tfoot),this}toBodyTr(e){let t=new Tr;return t.append(e),this.tbody.append(t),this.append(this.tbody),this}toFootTr(e){let t=new Tr;return t.append(e),this.tfoot.append(t),this.append(this.tfoot),this}}class Tbody extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TBODY")),this.initialize())}}class Td extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TD")),this.initialize())}colspan(e){return this.attr({colspan:e}),this}rowspan(e){return this.attr({rowspan:e}),this}}class Textarea extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TEXTAREA")),this.initialize())}}class Tfoot extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TFOOT")),this.initialize())}}class Th extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TH")),this.initialize())}colspan(e){return this.attr({colspan:e}),this}rowspan(e){return this.attr({rowspan:e}),this}}class Thead extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("THEAD")),this.initialize())}}class Time extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TIME")),this.initialize())}}class Title extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TITLE")),this.initialize())}}class Tr extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TR")),this.initialize())}}class Track extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("TRACK")),this.initialize())}}class U extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("U")),this.initialize())}}class Ul extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("UL")),this.initialize())}}class Var extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("VAR")),this.initialize())}}class Video extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("VIDEO")),this.initialize())}}class Wbr extends HtmlElement{constructor(e){super(),void 0===e&&(this.setElement(document.createElement("WBR")),this.initialize())}}class ViewModel{constructor(){this.data={}}set(e,t){this.data[e]=t}get(e){return this.data[e]}}class Controller{constructor(e=null){this.di=new Service;let t=new Injectable;return this.element=null,t.inject(this,e)}setElement(e){this.element=e}getElement(){return this.element}getEm(){return this.getDi().get("em")}getEventManager(){return this.getDi().get("eventManager")}getEvent(e,t,s=!1){this.getEventManager().setEventToElement(this.element.getElement(),eventName,s)}getDom(){return this.getDi().get("dom")}getById(e){return this.getDom().getById(e)}getTag(e){return this.getDom().create(e)}getAjax(){return this.getDi().get("")}getDi(){return Di}}class Component extends Controller{constructor(e=!1){super()}}class MethodType{static get POST(){return"POST"}static get GET(){return"GET"}static get PUT(){return"PUT"}static get DELETE(){return"DELETE"}}class Ajax{constructor(){this.httpRequest=new XMLHttpRequest,this.context={},this.method="POST",this.parameters="",this.container=[],this.responseFn=(()=>{}),this.bfSendFn=(()=>{})}setContext(e){this.context=e}getContext(){return this.context}setUrl(e){return this.url=e,this}getUrl(){return this.url}set(e,t){this.container[e]=t}get(e){return this.container[e]}setParams(e,t=!1){if("object"==typeof e){var s=0;for(var n in e){var r="";s<Object.keys(e).length&&(r="&"),this.parameters+=n+"="+encodeURIComponent(e[n])+r,s++}}else t&&(this.parameters=e+"="+encodeURIComponent(t));return this}POST(){return this.setMethod("POST"),this}PUT(){return this.setMethod("PUT"),this}DELETE(){return this.setMethod("DELETE"),this}GET(){return this.setMethod("GET"),this}setMethod(e){return this.method=e,this}addContext(){this.httpRequest.context=this.getContext(),this.httpRequest.getContext=function(){return this.context}}response(e){this.responseFn=e;try{this.bfSendFn(),this.addContext(),this.httpRequest.onreadystatechange=(()=>{this.httpRequest.readyState===this.httpRequest.DONE&&(200===this.httpRequest.status?void 0!==this.httpRequest.response&&void 0!==this.responseFn&&this.responseFn(this.httpRequest.response):this.error="ajax status"+this.httpRequest.status+" "+this.httpRequest.statusText)})}catch(e){console.log("Network.AJax.Exception",e)}return this}beforeSend(e){this.bfSendFn=e}setHeaders(){this.httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}getError(e){e(this.error)}clear(){this.method="GET",this.parameters="",this.error=null,this.url="",this.bfSendFn=(()=>{}),this.responseFn=(()=>{}),this.container=[]}send(e=!1){"function"==typeof e&&this.response(e),this.httpRequest.open(this.method,this.url),this.setHeaders(),this.httpRequest.send(this.parameters)}getDom(){return this.getDi().get("dom")}getAjax(){return this.getDi().get("ajax")}getEventManager(){return this.getDi().get("eventManager")}getClassName(){let e=/function (.{1,})\(/.exec(this.constructor.toString());return e&&e.length>1?e[1]:""}}class Checksum{constructor(e=!1){"object"==typeof e&&this.set(e),this.stringObject=""}set(e){let t=new Reflection;this.stringObject=t.read(e)}utf8ToBase64(e){return window.btoa(encodeURIComponent(e))}getChecksum(){return this.utf8ToBase64(this.stringObject)}}class Reflection{constructor(){this.deny={insertUrl:!0,deleteUrl:!0,updateUrl:!0,findUrl:!0},this.method=new Array,this.attributes=new Array,this.deny={}}getName(e){let t=/function (.{1,})\(/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}read(e){if("object"!=typeof e)return void console.log("Not an object");let t="";for(let s in e){let n=s,r=e[s];switch(typeof r){case"function":t+=" [method] "+n+"\n\n",this.methods.push();break;case"object":t+="\t[object] "+n+" "+this.read(r)+"\n\n";break;default:t+=" [property] "+n+" "+r+"\n\n",this.attributes.push({propName:r})}}return t}getAtttributeAsObjects(e){if("object"!=typeof e)return void console.log("Not an object");let t={};for(let s in e){let n=s,r=e[s];switch(typeof r){case"function":break;case"object":r instanceof RawModel?t[n]=this.getAtttributeAsObjects(r):null!=r&&Object.keys(r).length>0&&this.checkDataObject(n)&&(t[n]=r);break;default:-1==Deny.getDeny().indexOf(n)&&(t[n]=r)}}return t}checkDataObject(e){return 1!=this.deny[e]}getMethods(){return this.methods}getAttributes(){return this.attributes}}class PersistenceComparisonOperators{static get AND(){return"&&"}static get OR(){return"||"}static get EQUAL(){return"=="}static get DIFFERENT(){return"!="}}class DatamapperOperators{static get OR(){return"$or"}static get AND(){return"$and"}static get SORT(){return"$sort"}static get IS_NOT(){return"$isNot"}static get LIMIT(){return"$limit"}static get COLUMNS(){return"$columns"}static get CONDITIONAL(){return"$conditions"}}class PersistenceDataType{static get BOOLEAN(){return 1}static get INTEGER(){return 2}static get STRING(){return 3}static get OBJECT(){return 4}static get ARRAY(){return 5}static get CLASS(){return 6}static get BOOLEAN_TYPE(){return"boolean"}static get INTEGER_TYPE(){return"number"}static get STRING_TYPE(){return"string"}static get OBJECT_TYPE(){return"object"}static getValueByType(e){switch(typeof e){case DataType.STRING_TYPE:e='"'+e+'"'}return e}}class PersistenceSort{static get ASC(){return 1}static get DESC(){return-1}static sortByField(e,t){var s=[];for(var n in e){if(e.hasOwnProperty(n))(l={})[n]=e[n],l.tempSortName=e[n][t].toLowerCase(),s.push(l)}s.sort(function(e,t){var s=e.tempSortName,n=t.tempSortName;return s>n?1:s<n?-1:0});for(var r=[],i=0,a=s.length;i<a;i++){var l=s[i];for(var n in delete l.tempSortName,l)if(l.hasOwnProperty(n))var o=n;var c=l[o];r.push(c)}return r}}class UnitOfWork{static get NEW(){return 1}static get CREATED(){return 2}static get DELETED(){return 3}constructor(){this.detached=null,this.updated=null,this.deleted=null}}class Hydrator{constructor(){}hydrate(e,t){var s=new e;s.state=UnitOfWork.CREATED;for(let e in t){switch(typeof s[e]){case"function":var n=new s[e];s[e]=n instanceof RawModel?this.hydrate(s[e],t[e]):t[e];break;default:new Array;if(Array.isArray(s[e]))switch(typeof s[e][0]){case"function":if(void 0!==t[e].length&&t[e].length>0){var r=new s[e][0],i=new Array;if(r instanceof RawModel){for(let n in t[e])i.push(this.hydrate(s[e][0],t[e][n]));s[e]=i}}break;default:s[e]=t[e]}else s[e]=t[e]}Array.isArray(s[e])&&"function"==typeof s[e][0]&&(s[e]=new Array)}return s}}class Filter{constructor(){this.first="",this.final=[],this.init=!1,this.sort=new Array,this.limit=null,this.columns={}}buildCondition(e){var t=1,s=Object.keys(e).length;for(var n in e)switch(n){case DatamapperOperators.CONDITIONAL:let i=e[n];for(var r in i)switch(r){case DatamapperOperators.AND:let e=1,t=i[r],s=Object.keys(t).length;for(let n in t)this.getExpression(n,t[n],PersistenceComparisonOperators.AND,e,s),e++;break;case DatamapperOperators.OR:let n=1,a=i[r],l=Object.keys(a).length;for(let e in a)this.getExpression(e,a[e],PersistenceComparisonOperators.OR,n,l),n++;break;case DatamapperOperators.IS_NOT:let o=1,c=i[r],h=Object.keys(c).length;for(let e in c)this.getExpression(e,c[e],PersistenceComparisonOperators.AND,o,h,PersistenceComparisonOperators.DIFFERENT),o++}break;case DatamapperOperators.SORT:this.getSort(e[n]);break;case DatamapperOperators.LIMIT:this.getLimit(e[n]);break;case DatamapperOperators.COLUMNS:if(this.columns=e[n],"object"!=typeof e[n])throw Message.getCodeMessage(MessageCode.NOT_VALID_OBJECT,"$columns option");break;default:this.getExpression(n,e[n],PersistenceComparisonOperators.AND,t,s),t++}}getSort(e){switch(typeof e){case PersistenceDataType.STRING_TYPE:this.sort.push("data = Sort.sortByField('"+e+"');");break;case PersistenceDataType.OBJECT_TYPE:if(Array.isArray(e))for(let t in e){let s=e[t];this.sort.push("data = Sort.sortByField(data, '"+s+"')")}else for(let t in e){e[t];this.sort.push("data = Sort.sortByField(data, '"+t+"');"),e[t]==Sort.DESC&&this.sort.push("data = data.reverse();")}}}getLimit(e){"string"==typeof e&&(e=parseInt(e)),this.limit="data = data.slice(0, "+e+") "}getExpression(e,t,s,n,r,i="=="){var a="",l="";if(this.init&&(l=s),Array.isArray(t))for(var o=t,c=0;c<o.length;c++){let t="";c<o.length-1&&(t=s);PersistenceDataType.getValueByType(o[c]);a+='row["'+e+'"] '+i+" "+o[c]+" "+t+" "}else{let s="";a+='row["'+e+'"] '+i+" "+PersistenceDataType.getValueByType(t)+" "+s+" "}this.first+=l+" ( "+a+" ) ",this.init=!0}getColumns(e){var t={};if(Object.keys(this.columns).length>0)for(let s in this.columns)t[this.columns[s]]=e[this.columns[s]];else t=e;return t}getMultipleRowValues(rsp,conds=!0){var response=JSON.parse(rsp);"string"==typeof response&&(response=JSON.parse(response)),""==this.first&&(this.first="true");var data=new Array;if(Array.isArray(response)){var conditions=this.first,evalValue="if ("+conditions+") { data.push(this.getColumns(row)); }";for(let key in response){let row=response[key];conds?eval(evalValue):data.push(this.getColumns(row))}if(this.sort.length>0){var i=0;for(let key in this.sort)eval(this.sort[key]),i++}null!=this.limit&&eval(this.limit)}else"object"==typeof response?data.push(this.getColumns(response)):console.log("Response is not an object");return data}getOneRowValue(e){}}class EntityManager{constructor(){this.uow=new UnitOfWork,this.container=new Container,this.ajax=this.getDi().get("ajax"),this.eventManager=this.getDi().get("eventManager"),this.url=this.getDi().get("url")}find(e,t,s={}){this.ajax=this.getDi().get("ajax");var n=new e;let r=this.getUrl(n,"find");this.eventManager.set(n.getClassName(),t.name,t),this.ajax.setUrl(r),this.ajax.setParams(s),this.ajax.setMethod(n.getMethod()),this.ajax.response(r=>{let i=this.getResultSet(r,s,e,n);this.eventManager.execute(n.getClassName(),t.name,i)}),this.ajax.send()}getResultSet(e,t,s,n){let r=new Array,i=new Hydrator,a=new Filter;a.buildCondition(t);var l=new Array;n instanceof AjaxModelPersistent?(null==n.getAjaxInit()&&(n.setAjaxInit(!0),n.setData(e)),l=a.getMultipleRowValues(e,!1)):l=n instanceof AjaxModel?a.getMultipleRowValues(e,!1):a.getMultipleRowValues(e);var o=0;for(let e in l){let t=i.hydrate(s,l[e]);t instanceof StaticModel&&t.setIndex(o),r.push(t),o++}return 0==r.length&&(r=!1),r}findOne(e,t={}){}getUrl(e,t){let s=this.url.get("baseUri"),n=StringHelper.lcfirst(e.getModelName()),r="";switch(t){case"find":r=e.getFindUrl();break;case"findOne":r=e.getFindOneUrl();break;case"update":r=e.getUpdateUrl();break;case"count":r=e.getCountUrl();break;case"delete":r=e.getDeleteUrl();break;case"insert":r=e.getInsertUrl()}return""!=r?s+"/"+r:s+"/"+r+StringHelper.ucfirst(n)}count(e,t={}){}save(e){}delete(e){}getModelType(e){if(e instanceof RawModel){if(e instanceof AjaxModel)return ModelType.AJAX;if(e instanceof AjaxModelPersistent)return Model.PERSISTENT}else{if(Array.isArray(e))return ModelType.ARRAY;if("object"==typeof e)return ModelType.OBJECT}return!1}setModel(e){this.model=e}getModel(){return this.model}getDom(){return this.getDi().get("dom")}getAjax(){return this.getDi().get("ajax")}getEventManager(){return this.getDi().get("eventManager")}setDi(e){this.di=e}getDi(){return Di}}class Restricted{static get(){return["constructor","initialize","getById","getByTag","getByClass","getDi","hasKey","setPersistent","getPersistent","get","set","setDi","getUrl","setUrl","getAjax","setAjax","getDom","setDom","setEm","getEm","setEntityManager","getEntityManager","setContainer","getContainer","setTag","getTag","setEvent","getEvent","setGlobals","getGlobals"]}}class Dispatcher{constructor(){new IndexController}getEventManager(){return this.eventManager}}class Initializer{constructor(e){this.config=e}inject(){Di.set("Chronos.Dom.CssManager",new CssManager),Di.set("Chronos.Dom.ParentManager",new ParentManager),Di.set("Chronos.Dom.ElementManager",new ElementManager),Di.set("dom",new DomManager);let e=new EventManager;Di.set("eventManager",e);let t=new Ajax;Di.set("ajax",t),Di.set("url",new Url),this.applyConfig();let s=new EntityManager;Di.set("em",s),Di.set("uuid",new Uuid),Di.set("elementAdapter",new ElementAdapter)}applyConfig(){let e=this.config.get().paths;for(let t in e){let s=e[t];Di.get("url").set(t,s)}}}class Inspector{constructor(){this.elements=new Array,this.setElementAdapter(Di.get("elementAdapter")),this.searchElements()}setElementAdapter(e){this.elementAdapter=e}getElementAdapter(){return this.elementAdapter}searchElements(){let e=document.querySelectorAll("[chronos-init]");for(let t of e)this.elements.push(this.getElementAdapter().setElement(t).get())}getElements(){return document.querySelectorAll("[chronos-init]")}}class Handler{constructor(){this.inspector=new Inspector,this.elements=this.inspector.getElements()}arrangeElement(item){let htmlComponent=new ElementAdapter(item),controller=eval("new "+this.ucfirst(item.getAttribute("chronos-init")+"Controller"));controller.setElement(htmlComponent.get()),controller.initialize(),this.searchForActions(controller,htmlComponent.get())}searchForActions(e,t){let s=this.getDi().get("eventManager");for(let n of EventManager.getEvents())"function"==typeof e[n]&&s.setEventToElement(t.getElement(),n,e[n],e)}execute(){let e=new IndexController;e.view=new ViewModel,e.initialize();for(let e of this.elements)this.arrangeElement(e)}ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}handle(){this.execute()}getDi(){return Di}}class Application{static get CONFIG(){return"chronos.application.config"}constructor(e){this.initializeDependencyInjector(e),window.initializeDependencyInjector=function(){sessionStorage.clear()}}initializeDependencyInjector(e){new Initializer(e).inject()}start(){try{(new Handler).handle()}catch(e){console.warn(e)}}}