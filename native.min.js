class Container{constructor(){this.container={}}set(e,t){this.container[e]=t}get(e){return this.container[e]}}class Di{static set(e,t){if(""==e||void 0===e||""==t||void 0===t)throw'Key and value must not be empty in "Di"';void 0===Di.di&&(Di.di={}),Di.di[e]=t}static get(e){if(""==e||void 0===e)throw'Key must not be empty in "Di"';return Di.di[e]}static getAll(){return void 0===Di.di&&(Di.di={}),Di.di}}class Injectable{getValidator(e=null){let t={get:function(e,t){switch(t){case"em":return this.getDi().get("em");case"ajax":return this.getDi().get("ajax");case"dom":return this.getDi().get("dom");case"eventManager":return this.getDi().get("eventManager");case"uuid":return this.getDi().get("uuid");case"url":return this.getDi().get("url");case"setViewModel":case"getViewModel":default:return e[t]}}};return t}getDi(){return new Service}inject(e,t=null){return new Proxy(e,this.getValidator(t))}}class LocalStorage{constructor(){}set(e,t){localStorage.setItem(e,t)}get(e){return localStorage.getItem(e)}}class Service{constructor(){this.di=Di}set(e,t){this.di.set(e,t)}get(e){return this.di.get(e)}}class SessionStorage{constructor(){}set(e,t){sessionStorage.setItem(e,t)}get(e){return sessionStorage.getItem(e)}}class Config{constructor(){this.config={}}setConfig(e,t=Scope.LOCAL){this.config[t]=e}getConfig(e=Scope.LOCAL){return this.config[e]}}class Scope{static get LOCAL(){return 0}static get DEV(){return 1}static get TEST(){return 2}static get QA(){return 3}static get STAGING(){return 4}static get PRODUCTION(){return 5}}class Message{static get NOT_VALID_ARRAY(){return"The object returned in the transaction is not array"}static get NOT_VALID_ARRAY_OBJECT(){return"The objects returned in the transaction into array are not objects, every row must be object key, value"}static get NOT_VALID_OBJECT(){return"The received variable is not an object"}static getCodeMessage(e,t){t=" => "+t;switch(e){case MessageCode.NOT_VALID_ARRAY:return Message.NOT_VALID_ARRAY+t;case MessageCode.NOT_VALID_ARRAY_OBJECT:return Message.NOT_VALID_ARRAY_OBJECT+t;case MessageCode.NOT_VALID_OBJECT:return Message.NOT_VALID_OBJECT+t}}}class MessageCode{static get NOT_VALID_ARRAY(){return 1}static get NOT_VALID_ARRAY_OBJECT(){return 2}static get NOT_VALID_OBJECT(){return 3}}class ArrayHelper{constructor(){}static inArray(e,t){for(var s in e)if(e[s]==t)return!0;return!1}}class MathHelper{constructor(){}static getRandom(e,t){return Math.floor(Math.random()*t+e)}static getUUID(){return this.getS4()+this.getS4()+"-"+this.getS4()+"-"+this.getS4()+"-"+this.getS4()+"-"+this.getS4()+this.getS4()+this.getS4()}static getS4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}class StringHelper{constructor(){}static sanitizeString(e){let t=e.replace(/[`~!@#$%^&*()_|+\-=?;:"",.<>\{\}\[\]\\\/]/gi,"").toLowerCase();return t=t.toString().replace(/\s/g,"")}static capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}class Uuid{constructor(){}static get(){return MathHelper.getS4()+MathHelper.getS4()+"-"+MathHelper.getS4()+"-"+MathHelper.getS4()+"-"+MathHelper.getS4()+"-"+MathHelper.getS4()+MathHelper.getS4()+MathHelper.getS4()}}class Validator{static validStructArray(e){try{if(Array.isArray(e)){var t=e[0];if("object"==typeof t)return!0;throw Message.NOT_VALID_ARRAY_OBJECT}throw Message.NOT_VALID_ARRAY}catch(e){}}}class And extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]==this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var i=1;i<=s;i++)if(0==t[i])return!1;return!0}}class ComparisonOperators{static get AND(){return"&&"}static get OR(){return"||"}static get EQUAL(){return"=="}static get DIFFERENT(){return"!="}}class DataType{static get BOOLEAN(){return 1}static get INTEGER(){return 2}static get STRING(){return 3}static get OBJECT(){return 4}static get ARRAY(){return 5}static get CLASS(){return 6}static get BOOLEAN_TYPE(){return"boolean"}static get INTEGER_TYPE(){return"number"}static get STRING_TYPE(){return"string"}static get OBJECT_TYPE(){return"object"}static getValueByType(e){var t=typeof e;switch(t){case DataType.STRING_TYPE:e='"'+e+'"'}return e}}class Group extends Transaction{constructor(){super()}get(){}}class Gt extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]>this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var i=1;i<=s;i++)if(0==t[i])return!1;return!0}}class Gte extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]>=this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var i=1;i<=s;i++)if(0==t[i])return!1;return!0}}class In extends Transaction{constructor(e){if(super(),this.condition=new Array,"object"!=typeof e)throw"Not condition must be an object";for(var t in e){if(!(e[t]instanceof Array))throw"Not in value should be array";var s=e[t];for(var n in s){var i=DataType.getValueByType(s[n]);this.conditions.push('row["'+t+'"] == '+i)}}}get(){return"("+this.conditions.join(" || ")+")"}}class Like extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){new Array,Object.keys(this.condition).length;for(var t in this.condition)if(""!=this.condition[t]&&"string"==typeof e[t]){var s=new RegExp(this.condition[t],"i");return!!s.test(e[t].replace(/([^a-z_0-9\s]+)/gi,""))}return!1}}class Lt extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]<this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var i=1;i<=s;i++)if(0==t[i])return!1;return!0}}class Lte extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]<=this.condition[n]&&t.push(!0);if(t.length!=s)return!1;for(var i=1;i<=s;i++)if(0==t[i])return!1;return!0}}class Not extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;for(var n in e)e[n]==this.condition[n]&&t.push(!0);for(var i=0;i<s;i++)if(1==t[i])return!1;return!0}}class NotIn extends Transaction{constructor(e){if(super(),this.condition=new Array,"object"!=typeof e)throw"Not condition must be an object";for(var t in e){if(!(e[t]instanceof Array))throw"Not in value should be array";var s=e[t];for(var n in s){var i=DataType.getValueByType(s[n]);this.conditions.push('row["'+t+'"] != '+i)}}}get(){return"("+this.conditions.join(" && ")+")"}}class Operators{static get OR(){return"$or"}static get AND(){return"$and"}static get SORT(){return"$sort"}static get IS_NOT(){return"$isNot"}static get LIMIT(){return"$limit"}static get COLUMNS(){return"$columns"}static get CONDITIONAL(){return"$conditions"}}class Or extends Transaction{constructor(e){if(super(),this.condition={},"object"!=typeof e)throw"And condition must be an object";this.condition=e}get(e){var t=new Array,s=Object.keys(this.condition).length;this.condition instanceof Transaction&&t.push(this.condition.get(e));for(var n in e)this.condition[n]instanceof Transaction?t.push(this.condition[n].get(e)):e[n]==this.condition[n]&&t.push(!0);for(let e=0;e<s;e++)if(1==t[e])return!0;return!1}}class Query{constructor(e=!1){this.data=e,this.lim=null,this.sort=new Array,this.cols=new Array,this.conds=null,this.sortConds=!1,this.transactions=new Array,this.negativeConds=null,tjis.negativeTransactions=new Array}columns(e){if("object"!=typeof e)throw"Column param must be an object";return this.cols=e,this}getColumns(){return Object.keys(this.data[0])}resolveColumns(e){var t={};if(Object.keys(this.cols).length>0)for(let s in this.cols)t[this.cols[s]]=e[this.cols[s]];else t=Object.keys(e);return t}where(e){return e instanceof Transaction&&(e instanceof Not||e instanceof NotIn?(this.negativeTransactions.push(e),this.negativeConds++):(this.transactions.push(e),this.conds++)),this}limit(e){if("number"!=typeof e)throw"limit must be number";return this.lim=e,this}addOperator(e,t){var s="";return e>0&&(s=t+" "),s}orderBy(e){this.sort=e,this.sortConds=!0}resolveSort(e){switch(typeof this.sort){case DataType.STRING_TYPE:e=Sort.sortByField(e,this.sort);break;case DataType.OBJECT_TYPE:if(this.sort instanceof Array)for(let t in this.sort){let s=this.sort[t];e=Sort.sortByField(e,s)}else for(let t in this.sort){this.sort[t];e=Sort.sortByField(e,t),this.sort[t]==Sort.DESC&&(e=e.reverse())}}return e}miniChecksum(e){var t=JSON.stringify(e),s=0;if(0==t.length)return s;for(var n=0;n<t.length;n++)s=(s<<5)-s+t.charCodeAt(n),s&=s;return s}ifExistOnResult(e,t){for(var s in e)if(this.miniChecksum(e[s])==this.miniChecksum(t))return!1;return!0}get(){var e=new Array,t=1;for(var s in this.data){var n=this.data[s];if(null!=this.cols&&this.cols.length>0&&(n=this.resolveColumns(n)),this.conds>0)for(var s in this.transactions){this.transactions[s].get(n)&&this.ifExistOnResult(e,n)&&e.push(n)}else e.push(n);if(null!=this.lim&&t==this.lim)break;t++}var i=new Array;for(var s in e){n=e[s];if(this.negativeConds>0)for(var s in this.negativeTransactions){this.negativeTransactions[s].get(n)&&this.ifExistOnResult(i,n)&&i.push(n)}else i.push(n)}return this.sortConds&&(i=this.resolveSort(i)),i}}class Sort{static get ASC(){return 1}static get DESC(){return-1}static sortByField(e,t){var s=[];for(var n in e){if(e.hasOwnProperty(n))(l={})[n]=e[n],l.tempSortName=e[n][t].toLowerCase(),s.push(l)}s.sort(function(e,t){var s=e.tempSortName,n=t.tempSortName;return s>n?1:s<n?-1:0});for(var i=[],r=0,a=s.length;r<a;r++){var l;delete(l=s[r]).tempSortName;for(var n in l)if(l.hasOwnProperty(n))var o=n;var c=l[o];i.push(c)}return i}}class Transaction{constructor(){}get(e){}}class Component extends Controller{constructor(e=!1){super()}}class AjaxModel extends RawModel{constructor(){super(),this.insertUrl=null,this.deleteUrl=null,this.updateUrl=null,this.findUrl=null,this.findOneUrl=null,this.countUrl=null,this.method="POST",this.initialize()}setSource(e){this.setInsertUrl(e.insert),this.setUpdateUrl(e.update),this.setInsertUrl(e.insert),this.setCountUrl(e.count),this.setFindOneUrl(e.findOne),this.setFindUrl(e.find)}setInsertUrl(e){this.insertUrl=e}setFindUrl(e){this.findUrl=e}setFindOneUrl(e){this.findOneUrl=e}setCountUrl(e){this.countUrl=e}setDeleteUrl(e){this.deleteUrl=e}setUpdateUrl(e){this.updateUrl=e}getInsertUrl(){return this.insertUrl}getFindUrl(){return this.findUrl}getDeleteUrl(){return this.deleteUrl}getUpdateUrl(){return this.updateUrl}setParams(e){this.params=e}getParams(){return this.params}setMethod(e){this.method=e}getMethod(){return this.method}}class AjaxModelPersistent extends StaticModel{constructor(){super(),this.container=new SessionStorage,this.insertUrl=null,this.deleteUrl=null,this.updateUrl=null,this.findUrl=null}setSource(e){this.setInsertUrl(e.find),this.setUpdateUrl(e.update),this.setInsertUrl(e.insert),this.setFindUrl(e.insert)}setAjaxInit(e){this.container.set("ajaxInit_"+this.getClassName(),e)}getAjaxInit(){return this.container.get("ajaxInit_"+this.getClassName())}setInsertUrl(e){this.insertUrl=e}setFindUrl(e){this.findUrl=e}setDeleteUrl(e){this.deleteUrl=e}setUpdateUrl(e){this.updateUrl=e}getInsertUrl(){return this.insertUrl}getFindUrl(){return this.findUrl}getDeleteUrl(){return this.deleteUrl}getUpdateUrl(){return this.updateUrl}setParams(e){this.params=e}getParams(){return this.params}setMethod(e){this.method=e}getMethod(){return this.method}}class Deny{static getDeny(){return["state","source","insertUrl","deleteUrl","updateUrl","findUrl","params","internalId","method"]}}class RawModel{constructor(){this.state=1,this.identify=Uuid.get()}initialize(){}beforeInsert(){}beforeFind(){}beforeUpdate(){}beforeDelete(){}getClassName(){let e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}getIdentify(){return this.identify}}class StaticModel extends RawModel{constructor(e){super(),this.storage=new SessionStorage,this.initialize()}setData(e){this.storage.set("Models_Identify_"+this.getClassName(),JSON.stringify(e))}getData(){let e=this.storage.get("Models_Identify_"+this.getClassName());return e}getObjectData(){return JSON.parse(this.storage.get("Models_Identify_"+this.getClassName()))}setIndex(e){this.index=e}getIndex(){return this.index}}class ElementAdapter{constructor(e){this.element=e}setElement(e){return this.element=e,this}get(){let e;if("string"!=typeof this.element){if(void 0===this.element.nodeName)return!1;e=this.element.nodeName}else e=this.element;let t=!1;switch(e){case"A":t=new A;break;case"ABBR":t=new Abbr;break;case"ADDRESS":t=new Address;break;case"AREA":t=new Area;break;case"ARTICLE":t=new Article;break;case"ASIDE":t=new Aside;break;case"AUDIO":t=new Audio;break;case"B":t=new B;break;case"BASE":t=new Base;break;case"BDI":t=new Bdi;break;case"BDO":t=new Bdo;break;case"BLOCKQUOTE":t=new Blockquote;break;case"BODY":t=new Body;break;case"BR":t=new Br;break;case"BUTTON":t=new Button;break;case"CANVAS":t=new Canvas;break;case"CAPTION":t=new Caption;break;case"CITE":t=new Cite;break;case"CODE":t=new Code;break;case"COL":t=new Col;break;case"COLGROUP":t=new ColGroup;break;case"DATALIST":t=new Datalist;break;case"DB":t=new Db;break;case"DEL":t=new Del;break;case"DETAILS":t=new Details;break;case"DFN":t=new Dfn;break;case"DIALOG":t=new Dialog;break;case"DIV":t=new Div;break;case"DL":t=new Dl;break;case"DT":t=new Dt;break;case"EM":t=new Em;break;case"EMBED":t=new Embed;break;case"FIELDSET":t=new Fieldset;break;case"FIGCAPTION":t=new Figcaption;break;case"FIGURE":t=new Figure;break;case"FOOTER":t=new Footer;break;case"FORM":t=new Form;break;case"H1":t=new H1;break;case"H2":t=new H2;break;case"H3":t=new H3;break;case"H4":t=new H4;break;case"H5":t=new H5;break;case"H6":t=new H6;break;case"HEAD":t=new Head;break;case"HEADER":t=new Header;break;case"I":t=new I;break;case"IFRAME":t=new Iframe;break;case"IMG":t=new Img;break;case"INPUT":t=new Input;break;case"INS":t=new Ins;break;case"KBD":t=new Kbd;break;case"KEYGEN":t=new Keygen;break;case"LABEL":t=new Label;break;case"LEYEND":t=new Leyend;break;case"LI":t=new Li;break;case"LINK":t=new Link;break;case"MAIN":t=new Main;break;case"MENU":t=new Menu;break;case"MENUITEM":t=new Menuitem;break;case"META":t=new Meta;break;case"METER":t=new Meter;break;case"NAV":t=new Nav;break;case"NOSCRIP":t=new Noscrip;break;case"OBJECT":t=new Obj;break;case"OL":t=new Ol;break;case"OPTGROUP":t=new Optgroup;break;case"P":t=new P;break;case"PARAM":t=new Param;break;case"PRE":t=new Pre;break;case"PROGRESS":t=new Progress;break;case"Q":t=new Q;break;case"RP":t=new Rp;break;case"RT":t=new Rt;break;case"RUBY":t=new Ruby;break;case"S":t=new S;break;case"SAMP":t=new Samp;break;case"SCRIPT":t=new Script;break;case"SECTION":t=new Section;break;case"SELECT":t=new Select;break;case"SMALL":t=new Small;break;case"SOURCE":t=new Source;break;case"SPAN":t=new Span;break;case"STRONG":t=new Strong;break;case"STYLE":t=new Style;break;case"SUB":t=new Sub;break;case"SUMMARY":t=new Summary;break;case"SUP":t=new Sup;break;case"TABLE":t=new Table;break;case"TBODY":t=new Tbody;break;case"TD":t=new Td;break;case"TEXTAREA":t=new Textarea;break;case"TFOOT":t=new Tfoot;break;case"TH":t=new Th;break;case"THEAD":t=new Thead;break;case"TIME":t=new Time;break;case"TITLE":t=new Title;break;case"TR":t=new Tr;break;case"TRACK":t=new Track;break;case"U":t=new U;break;case"UL":t=new Ul;break;case"VAR":t=new Var;break;case"VIDEO":t=new Video;break;case"WBR":t=new Wbr;break;default:(t=new HtmlElement).create(this.element)}return void 0!==this.element.nodeName&&t.setElement(this.element),t}}class CssManager{constructor(){}setElement(e){return this.element=e,this}getElement(){return this.element}css(e,t=null){if("object"==typeof e)for(let t in e)this.element.style[e]=e[t];else if("string"==typeof e&&null!=t)this.element.style[e]=t;else if("string"==typeof e&&null==t)return this.element.style[e];return this}setStyle(e,t=null){if("object"==typeof e)for(let t in e)this.element.style[e]=e[t];else if("string"==typeof e&&null!=t)this.element.style[e]=t;else if("string"==typeof e&&null==t)return this.element.style[e];return this}class(e){return this.element.setAttribute("class",e),this}setClass(e){return this.element.setAttribute("class",e),this}addClass(e){let t=this.element.getAttribute("class");return t+=" "+e,this.element.setAttribute("class",t),this}addChild(e){return this.element.append(e),this}show(){return this.element.style.display="",this}hide(){return this.element.style.display="none",this}}class DomManager{constructor(){}getById(e,t=null){let s=new ElementAdapter(document.getElementById(e));return s.get()}getByTag(e){let t=document.getElementsByTagName(e),s=new Array;for(let e in t)if("string"==typeof t[e].nodeName){let n=new ElementAdapter(t[e]);s.push(n.get())}return 0!=s.length&&(1==s.length?s[0]:s)}getByClass(e,t=null){let s=document.getElementsByClassName(e),n=new Array;for(let e in s)if("string"==typeof s[e].nodeName){let t=new ElementAdapter(s[e]);n.push(t.get())}return 0!=n.length&&(1==n.length?n[0]:this)}getByName(e,t=null){let s=document.getElementsByName(e),n=new Array;for(let e in s)if("string"==typeof s[e].nodeName){let t=new ElementAdapter(s[e]);n.push(t.get())}return 0!=n.length&&(1==n.length?n[0]:n)}setElement(e){return this.element=e,this}getElement(){return this.element}getClassName(){let e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}}class ElementManager{constructor(){}setElement(e){this.element=e}getElement(){return this.element}getClassName(){let e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}setId(e){return this.attr("id",e),this}getId(){return this.attr("id")}setRequired(e){return this.element.required=e,this}getRequired(){return this.element.required}checkAppendValue(e){switch(typeof e){case"string":this.element.appendChild(document.createTextNode(e));break;case"number":this.element.appendChild(document.createTextNode(e.toString()));break;case"object":void 0!==e.getElement()?this.verifyElement(e.getElement()):this.verifyElement(e)}}verifyElement(e,t="append"){if(this.element instanceof HTMLCollection)for(let t in this.element)void 0!==this.element[t].nodeType&&1==this.element[t].nodeType&&this.element[t].appendChild(e);else this.element.appendChild(e)}append(e){if(Array.isArray(e)||e instanceof HTMLCollection)for(let t in e)this.checkAppendValue(e[t]);else this.checkAppendValue(e);return this}class(e){return this.element.setAttribute("class",e),this}addClass(e){let t=this.element.getAttribute("class");return t+=" "+e,this.element.setAttribute("class",t),this}attr(e,t=!1){if("object"==typeof e&&0==t)for(let t in e)this.element.setAttribute(t,e[t]);else if("string"==typeof e&&0!=t)this.element.setAttribute(e,t);else if("string"==typeof e&&0==t)return this.element.getAttribute(e);return this}removeAttr(e){return this.element.removeAttribute(e),this}html(e=null){return null!=e?(this.removeChildNodes(),this.append(e),this):this.element.innerHTML}setHtml(e=null){return null?(this.removeChildNodes(),this.append(null),this):this.element.innerHTML}removeChildNodes(){if(this.element instanceof HTMLCollection)for(let e in this.element)this.removeChilds(this.element[e],this.element[e].childNodes);else this.removeChilds(this.element,this.element.childNodes)}removeChilds(e,t){for(;e.firstChild;)e.removeChild(e.firstChild)}val(e=!1){return e||"string"==typeof e?(this.element.value=e,this.attr("value",e),this):this.element.value}getValue(e=!1){return e||"string"==typeof e?(this.element.value=e,this.attr("value",e),this):this.element.value}valAsInt(){return parseInt(this.val())}text(e=!1){return e?(this.element.innerHtml=e,this):this.element.innerHtml}empty(){return this.removeChildNodes(),this}remove(e=!1){e?this.getElement().removeChild(e):this.getElement().parentElement.removeChild(this.getElement())}getAsObject(){let e=this.element.childNodes,t=new Array;if(e instanceof NodeList)for(let s in e)if(void 0!==e[s].nodeType)switch(e[s].nodeType){case Node.ELEMENT_NODE:let n=new ElementAdapter(e[s]).get(),i={},r=n.getAsObject();i[n.getClassName().toLowerCase()]=r,r.length>0&&t.push(i);break;case Node.TEXT_NODE:t.push(e[s].nodeValue)}return t}getAsJson(){let e=this.getAsObject();return JSON.stringify(e)}}class EventManager{constructor(){}setEventToElement(e,t){if(Array.isArray(this.element))for(let s of this.element)this.element.addEventListener(e,t.bind(this));else this.element.addEventListener(e,t.bind(this));return this}click(e){return this.setEventToElement("click",e),this}doubleClick(e){return this.setEventToElement("dblclick",e),this}change(e){return this.setEventToElement("change",e),this}keypress(e){return this.setEventToElement("keypress",e),this}keydown(e){return this.setEventToElement("keydown",e),this}keyup(e){return this.setEventToElement("keyup",e),this}paste(e){return this.setEventToElement("paste",e),this}blur(e){return this.setEventToElement("blur",e),this}focus(e){return this.setEventToElement("focus",e),this}submit(e){return this.setEventToElement("submit",e),this}}class ParentManager{constructor(){}getParent(){let e=this.element.parentElement;return 1==e.nodeType&&new ElementAdapter(e).get()}getSiblings(){let e=this.getParent().getChilds();if(e.length>0){let t=new Array;for(let s of e)s.getElement()!=this.getElement()&&t.push(s);return t}return!1}getChilds(){let e=this.element.childNodes,t=new Array;for(let s in e)if(1==e[s].nodeType){let n=new ElementAdapter(e[s]).get();t.push(n)}return t}setElement(e){return this.element=e,this}getElement(){return this.element}}class A extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("A")),this.setDi(new Service),this.initialize(e)}favIcon(e){let t=(new I).class(e);return this.append(t.getElement()),this}href(e){return this.attr("href",e),this}}class Abbr extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("ABBR")),this.setDi(new Service),this.initialize(e)}}class Address extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("ADDRESS")),this.setDi(new Service),this.initialize(e)}}class Area extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("AREA")),this.setDi(new Service),this.initialize(e)}}class Article extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("ARTICLE")),this.setDi(new Service),this.initialize(e)}}class Aside extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DB")),this.setDi(new Service),this.initialize(e)}}class Audio extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DB")),this.setDi(new Service),this.initialize(e)}}class B extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("B"))}}class Base extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BASE")),this.setDi(new Service),this.initialize(e)}}class Bdi extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BDI")),this.setDi(new Service),this.initialize(e)}}class Bdo extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BDO")),this.setDi(new Service),this.initialize(e)}}class Blockquote extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BLOCKQUOTE")),this.setDi(new Service),this.initialize(e)}}class Body extends HtmlElement{constructor(e={}){super(),this.setElement(document.body),this.setDi(new Service),this.initialize(e)}}class Br extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BR")),this.setDi(new Service),this.initialize(e)}}class Button extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BUTTON")),this.setDi(new Service),this.initialize(e)}type(e){return this.attr("type",e),this}favIcon(e){let t=(new I).class(e);return this.append(t),this}success(){return this.addClass("btn btn-success"),this}notice(){return this.addClass("btn btn-notice"),this}default(){return this.addClass("btn btn-default"),this}primary(){return this.addClass("btn btn-primary"),this}warning(){return this.addClass("btn btn-warning"),this}danger(){return this.addClass("btn btn-danger"),this}}class Canvas extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("CANVAS")),this.setDi(new Service),this.initialize(e)}}class Caption extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("CAPTION")),this.setDi(new Service),this.initialize(e)}}class Cite extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("CITE")),this.setDi(new Service),this.initialize(e)}}class Code extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("CODE")),this.setDi(new Service),this.initialize(e)}}class Col extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("COL")),this.setDi(new Service),this.initialize(e)}}class ColGroup extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("COLGROUP")),this.setDi(new Service),this.initialize(e)}}class Datalist extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DATALIST")),this.setDi(new Service),this.initialize(e)}}class Db extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DB")),this.setDi(new Service),this.initialize(e)}}class Del extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BR")),this.setDi(new Service),this.initialize(e)}}class Details extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DETAILS")),this.setDi(new Service),this.initialize(e)}}class Dfn extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DFN")),this.setDi(new Service),this.initialize(e)}}class Dialog extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DIALOG")),this.setDi(new Service),this.initialize(e)}}class Div extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DIV")),this.setDi(new Service),this.initialize(e)}}class Dl extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DL")),this.setDi(new Service),this.initialize(e)}}class Dt extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("DT")),this.setDi(new Service),this.initialize(e)}}class Em extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("EM")),this.setDi(new Service),this.initialize(e)}}class Embed extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("EMBED")),this.setDi(new Service),this.initialize(e)}}class Fieldset extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("FIELDSET")),this.setDi(new Service),this.initialize(e)}}class Figcaption extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("FIGCAPTION")),this.setDi(new Service),this.initialize(e)}}class Figure extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("FIGURE")),this.setDi(new Service),this.initialize(e)}}class Footer extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("FOOTER")),this.setDi(new Service),this.initialize(e)}}class Form extends HtmlElement{constructor(e={}){super(),this.invalidElements=new Array,this.setElement(document.createElement("FORM")),this.setDi(new Service),this.initialize(e)}submit(e){this.getElement().addEventListener("submit",function(t){let s=e.bind(this)(t);return 0!=s&&void 0!==s||t.preventDefault(),!0}.bind(this))}getInvalidElements(){return this.invalidElements}validate(e){let t=this.getFormElements();if(this.invalidElements=new Array,t.length>0){for(let e of t)""==e.val()&&this.invalidElements.push(e);return 0==this.invalidElements.length}return!1}getFormElements(){let e=new Array,t=this.getElement().elements;for(let s of t){let t=new ElementAdapter(s).get();0!=t&&e.push(t)}return e}setAutoComplete(e){return e?this.attr("autocomplete","on"):this.attr("autocomplete","off"),this}getAutoComplete(){return this.attr("autocomplete")}}class H1 extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("H1")),this.setDi(new Service),this.initialize(e)}}class H2 extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("H2")),this.setDi(new Service),this.initialize(e)}}class H3 extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("H3")),this.setDi(new Service),this.initialize(e)}}class H4 extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("H4")),this.setDi(new Service),this.initialize(e)}}class H5 extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("H5")),this.setDi(new Service),this.initialize(e)}}class H6 extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BR")),this.setDi(new Service),this.initialize(e)}}class Head extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("HEAD")),this.setDi(new Service),this.initialize(e)}}class Header extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("HEADER")),this.setDi(new Service),this.initialize(e)}}class Hidden extends Input{constructor(e={}){super(),this.setHidden()}}class Hr extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("HR")),this.setDi(new Service),this.initialize(e)}}class I extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("I")),this.setDi(new Service),this.initialize(e)}}class Iframe extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("IFRAME")),this.setDi(new Service),this.initialize(e)}}class Img extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("IMG")),this.setDi(new Service),this.initialize(e)}width(e){return this.getElement().style.width=e,this}height(e){return this.getElement().style.width=e,this}src(e){return this.attr("src",e),this}}class Input extends FormTag{static get NUMBERS(){return 0}static get TEXT(){return 1}static get NO_SPECIAL_CHARACTERS(){return 2}static get TEXT_NO_SPECIAL_CHARACTERS(){return 3}static get NUMBERS_NO_SPECIAL_CHARACTERS(){return 4}constructor(e={}){super(),this.setElement(document.createElement("INPUT")),this.setDi(new Service),this.initialize(e)}type(e){return this.attr("type",e),this}setText(){return this.attr("type","text"),this}setHidden(){return this.attr("type","hidden"),this}setNumber(){return this.attr("type","number"),this}setDate(){return this.attr("type","number"),this}setFile(){return this.attr("type","file"),this}}class Ins extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("INS")),this.setDi(new Service),this.initialize(e)}}class Kbd extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("KBD")),this.setDi(new Service),this.initialize(e)}}class Keygen extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("KEYGEN")),this.setDi(new Service),this.initialize(e)}}class Label extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("LABEL")),this.setDi(new Service),this.initialize(e)}}class Leyend extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("LEYEND")),this.setDi(new Service),this.initialize(e)}}class Li extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("LI")),this.setDi(new Service),this.initialize(e)}}class Link extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("LINK")),this.setDi(new Service),this.initialize(e)}}class Main extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("MAIN")),this.setDi(new Service),this.initialize(e)}}class Map extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("MAP")),this.setDi(new Service),this.initialize(e)}}class Menu extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("MENU")),this.setDi(new Service),this.initialize(e)}}class Menuitem extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("MENUITEM")),this.setDi(new Service),this.initialize(e)}}class Meta extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("META")),this.setDi(new Service),this.initialize(e)}}class Meter extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("METER")),this.setDi(new Service),this.initialize(e)}}class Nav extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("NAV")),this.setDi(new Service),this.initialize(e)}}class Noscrip extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("NOSCRIP")),this.setDi(new Service),this.initialize(e)}}class Obj extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("OBJ")),this.setDi(new Service),this.initialize(e)}}class Ol extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("OL")),this.setDi(new Service),this.initialize(e)}}class Optgroup extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("OPTGROUP")),this.setDi(new Service),this.initialize(e)}}class Option extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("OPTION")),this.setDi(new Service),this.initialize(e)}setValue(e){return this.attr("value",e),this}getValue(){return this.attr("value")}setContent(e){return this.append(e),this}getContent(){return this.getElement().text}}class Output extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("OUTPUT")),this.setDi(new Service),this.initialize(e)}}class P extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("P")),this.setDi(new Service),this.initialize(e)}}class Param extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("PARAM")),this.setDi(new Service),this.initialize(e)}}class Pre extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("PRE")),this.setDi(new Service),this.initialize(e)}}class Progress extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("PROGRESS")),this.setDi(new Service),this.initialize(e)}}class Q extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("Q")),this.setDi(new Service),this.initialize(e)}}class Rp extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("RP")),this.setDi(new Service),this.initialize(e)}}class Rt extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("RT")),this.setDi(new Service),this.initialize(e)}}class Ruby extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("RUBY")),this.setDi(new Service),this.initialize(e)}}class S extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BR")),this.setDi(new Service),this.initialize(e)}}class Samp extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SAMP")),this.setDi(new Service),this.initialize(e)}}class Script extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SCRIPT")),this.setDi(new Service),this.initialize(e)}}class Section extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SECTION")),this.setDi(new Service),this.initialize(e)}}class Select extends FormTag{constructor(e={}){super(),this.choose="Choose...",this.setElement(document.createElement("SELECT")),this.setDi(new Service),this.initialize(e)}getSelected(){var e=new Option;return e.setElement(this.getElement().options[this.getElement().selectedIndex]),e}iterate(e){var t=this.getChilds();for(var s in t)e(t[s]);return this}setChoose(e){this.choose=e}select(e){var t=this.getElement().childNodes;for(var s in t)t[s].value==e&&t[s].setAttribute("selected","selected")}build(e,t){e instanceof StaticModel&&(e=JSON.parse(e.getData()));for(let s in e){let n=new Option,i=e[s][t[0]];""===i&&(i=e[s][t[1]]),n.attr({value:i}),n.append(e[s][t[1]]),this.append([n]),0}return this}}class Small extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("small")),this.setDi(new Service),this.initialize(e)}}class Source extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SOURCE")),this.setDi(new Service),this.initialize(e)}}class Span extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SPAN")),this.setDi(new Service),this.initialize(e)}}class Strong extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("STRONG")),this.setDi(new Service),this.initialize(e)}}class Style extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("STYLE")),this.setDi(new Service),this.initialize(e)}}class Sub extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SUB")),this.setDi(new Service),this.initialize(e)}}class Summary extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SUMMARY")),this.setDi(new Service),this.initialize(e)}}class Sup extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SUP")),this.setDi(new Service),this.initialize(e)}}class Table extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("BR")),this.setDi(new Service),this.thead=new Thead,this.tbody=new Tbody,this.tfoot=new Tfoot,this.initialize(e)}getThead(){return this.thead}getTbody(){return this.tbody}toHead(e){return this.thead.append(e),this.append(this.thead),this}toHeadTr(e){let t=new Tr;return t.append(e),this.thead.append(t),this.append(this.thead),this}toBody(e){return this.tbody.append(e),this.append(this.tbody),this}toFoot(e){return this.tfoot.append(e),this.append(this.tfoot),this}toBodyTr(e){let t=new Tr;return t.append(e),this.tbody.append(t),this.append(this.tbody),this}toFootTr(e){let t=new Tr;return t.append(e),this.tfoot.append(t),this.append(this.tfoot),this}}class Tbody extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TBODY")),this.setDi(new Service),this.initialize(e)}}class Td extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TD")),this.setDi(new Service),this.initialize(e)}colspan(e){return this.attr({colspan:e}),this}rowspan(e){return this.attr({rowspan:e}),this}}class Textarea extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TEXTAREA")),this.setDi(new Service),this.initialize(e)}}class Tfoot extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TFOOT")),this.setDi(new Service),this.initialize(e)}}class Th extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TH")),this.setDi(new Service),this.initialize(e)}colspan(e){return this.attr({colspan:e}),this}rowspan(e){return this.attr({rowspan:e}),this}}class Thead extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("THEAD")),this.setDi(new Service),this.initialize(e)}}class Time extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TIME")),this.setDi(new Service),this.initialize(e)}}class Title extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TITLE")),this.setDi(new Service),this.initialize(e)}}class Tr extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TR")),this.setDi(new Service),this.initialize(e)}}class Track extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("TRACK")),this.setDi(new Service),this.initialize(e)}}class U extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("U")),this.setDi(new Service),this.initialize(e)}}class Ul extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("UL")),this.setDi(new Service),this.initialize(e)}}class Var extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("VAR")),this.setDi(new Service),this.initialize(e)}}class Video extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("VIDEO")),this.setDi(new Service),this.initialize(e)}}class Wbr extends HtmlElement{constructor(e={}){super(),this.setElement(document.createElement("SELECT")),this.setDi(new Service),this.initialize(e)}}class HtmlElement{constructor(){this.CSS_MANAGER="Chronos.Dom.CssManager",this.PARENT_MANAGER="Chronos.Dom.DomManager",this.ELEMENT_MANAGER="Chronos.Dom.ElementManager";let e=new Proxy(this,this.getValidator());return e}initialize(e){}set(e){this.viewModelData=e}get(e){return this.viewModelData[e]}setElement(e){return this.element=e,this}getElement(){return this.element}getCss(){let e=this.getDi().get(this.CSS_MANAGER);return e.setElement(this.getElement()),e}getElementManager(){let e=Di.get(this.ELEMENT_MANAGER);return console.log(Di.getAll(),e,this.getElement()),e.setElement(this.getElement()),e}getParentManager(){let e=this.getDi().get(this.PARENT_MANAGER);return e.setElement(this.getElement()),e}getEventManager(){let e=this.getDi().get("eventManager");return e.setElement(this.getElement()),e}create(e){return this.element=document.createElement(e),this}getClassName(){let e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}getChecksum(){let e=this.getClassName()+JSON.stringify(this);return window.btoa(encodeURIComponent(e))}getValidator(){let e={get:function(e,t){switch(t){case"append":return this.getElementManager().append;case"attr":return this.getElementManager().attr;case"setAttribute":return this.getElementManager().setAttribute;case"removeAttribute":return this.getElementManager().removeAttribute;case"class":return this.getElementManager().class;case"addClass":return this.getElementManager().addClass;case"removeClass":return this.getElementManager().removeClass;case"setId":return this.getElementManager().setId;case"getId":return this.getElementManager().getId;case"setRequired":return this.getElementManager().setRequired;case"getRequired":return this.getElementManager().getRequired;case"html":return this.getElementManager().html;case"setHtml":return this.getElementManager().setHtml;case"setValue":return this.getElementManager().setValue;case"val":return this.getElementManager().val;case"getValue":return this.getElementManager().getValue;case"valAsInt":return this.getElementManager().valAsInt;case"text":return this.getElementManager().text;case"empty":return this.getElementManager().empty;case"remove":return this.getElementManager().remove;case"getAsObject":return this.getElementManager().getAsObject;case"getAsJson":return this.getElementManager().getAsJson;case"getSibilings":return this.getParentManager().getSiblings;case"getParent":return this.getParentManager().getParent;case"getChilds":return this.getParentManager().getChilds;case"click":return this.getParentManager().click;case"doubleClick":return this.getParentManager().doubleClick;case"change":return this.getParentManager().change;case"keypress":return this.getParentManager().keypress;case"keydown":return this.getParentManager().keydown;case"keyup":return this.getParentManager().keyup;case"paste":return this.getParentManager().paste;case"blur":return this.getParentManager().blur;case"focus":return this.getParentManager().focus;case"submit":return this.getParentManager().submit;case"show":return this.getCss().show;case"hide":return this.getCss().hide;case"css":return this.getCss().css;case"setStyle":return this.getCss().setStyle;default:return e[t]}}.bind(this)};return e}setDi(e){return this.di=e,this}getDi(){return this.di}}class ViewModel{constructor(){this.data={}}resolveViews(){if(Array.isArray(this.views))for(let e of this.views)e.set(this.data),e.initialize();else this.views instanceof HtmlElement&&(console.log("2",this.data),this.views.set(this.data),this.views.initialize())}set(e){if("object"!=typeof e)throw"Data passed to view model must be an object with key, value";this.data=e,this.resolveViews()}setElements(e){this.views=e}getElements(){return this.views}get(e){return this.data[e]}}class Controller{constructor(e=null){this.di=new Service,this.viewModel={};let t=new Injectable;return t.inject(this,e)}initialize(){}setViewModel(e){this.viewModel=e}getViewModel(){return this.viewModel}getDi(){return this.di}setDi(e){this.di=e}}class Ajax{constructor(){this.httpRequest=new XMLHttpRequest,this.context={},this.method="POST",this.parameters="",this.container=[],this.responseFn=function(){},this.bfSendFn=function(){}.bind(this)}setContext(e){this.context=e}getContext(){return this.context}setUrl(e){return this.url=e,this}getUrl(){return this.url}set(e,t){this.container[e]=t}get(e){return this.container[e]}setParams(e,t=!1){if("object"==typeof e){var s=0;for(var n in e){var i="";s<Object.keys(e).length&&(i="&"),this.parameters+=n+"="+encodeURIComponent(e[n])+i,s++}}else t&&(this.parameters=e+"="+encodeURIComponent(t));return this}POST(){return this.setMethod("POST"),this}PUT(){return this.setMethod("PUT"),this}DELETE(){return this.setMethod("DELETE"),this}GET(){return this.setMethod("GET"),this}setMethod(e){return this.method=e,this}addContext(){this.httpRequest.context=this.getContext(),this.httpRequest.getContext=function(){return this.context}}response(e){this.responseFn=e;try{this.bfSendFn(),this.addContext(),this.httpRequest.onreadystatechange=function(){this.httpRequest.readyState===this.httpRequest.DONE&&(200===this.httpRequest.status?void 0!==this.httpRequest.response&&void 0!==this.responseFn&&this.responseFn(this.httpRequest.response):this.error="ajax status"+this.httpRequest.status+" "+this.httpRequest.statusText)}.bind(this)}catch(e){console.log("Network.AJax.Exception",e)}return this}beforeSend(e){this.bfSendFn=e}setHeaders(){this.httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}getError(e){e(this.error)}clear(){this.method="GET",this.parameters="",this.error=null,this.url="",this.bfSendFn=function(){},this.responseFn=function(){},this.container=[]}send(e=!1){"function"==typeof e&&this.response(e.bind(this)),this.httpRequest.open(this.method,this.url),this.setHeaders(),this.httpRequest.send(this.parameters)}getClassName(){let e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}}class MethodType{static get POST(){return"POST"}static get GET(){return"GET"}static get PUT(){return"PUT"}static get DELETE(){return"DELETE"}}class ComparisonOperators{static get AND(){return"&&"}static get OR(){return"||"}static get EQUAL(){return"=="}static get DIFFERENT(){return"!="}constructor(){}}class DataType{static get BOOLEAN(){return 1}static get INTEGER(){return 2}static get STRING(){return 3}static get OBJECT(){return 4}static get ARRAY(){return 5}static get CLASS(){return 6}static get BOOLEAN_TYPE(){return"boolean"}static get INTEGER_TYPE(){return"number"}static get STRING_TYPE(){return"string"}static get OBJECT_TYPE(){return"object"}static getValueByType(e){var t=typeof e;switch(t){case DataType.STRING_TYPE:e='"'+e+'"'}return e}}class DatamapperOperators{static get OR(){return"$or"}static get AND(){return"$and"}static get SORT(){return"$sort"}static get IS_NOT(){return"$isNot"}static get LIMIT(){return"$limit"}static get COLUMNS(){return"$columns"}static get CONDITIONAL(){return"$conditions"}}class EntityManager{constructor(){this.uow=new UnitOfWork,this.di=new Service,this.container=new Container}getContainer(){return this.container}find(e,t={}){return this.setWhenIsModel(e,t,"find"),this}findOne(e,t={}){return this.setWhenIsModel(e,t,"findOne"),this}count(e,t={}){return this.setWhenIsModel(e,t,"count"),this}setWhenIsModel(e,t,s){let n=new e;if(this.getContainer().set("transactionModel",e),this.getContainer().set("transactionObjModel",n),this.getContainer().set("transactionParams",t),this.getContainer().set("transactionType",s),!(n instanceof RawModel))throw"Model must be instance of RawModel";n instanceof AjaxModelPersistent?null===n.getAjaxInit()&&this.callAjax(n,s,t):n instanceof AjaxModel&&this.callAjax(n,s,t)}callAjax(e,t,s){this.ajax=new Ajax;var n=null;switch(t){case"find":n=e.getFindUrl();break;case"findOne":n=e.getFindOneUrl();break;case"insert":n=e.getInsertUrl();break;case"update":n=e.getUpdateUrl();break;case"delete":n=e.getDeleteUrl();break;case"count":n=e.getCountUrl()}null==n&&(n=this.getDi().get("url").get("baseUrl")+this.lcfirst(e.getClassName())+this.ucfirst(t)),this.ajax.setUrl(n),this.ajax.setParams(s),this.ajax.setMethod(e.getMethod())}ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}lcfirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}save(e){if(this.getContainer().set("transactionModel",e),this.getContainer().set("transactionObjectModel",e),this.getContainer().set("transactionType","save"),e instanceof AjaxModel){this.ajax=new Ajax;var t=e.getClassName();switch(e.state){case UnitOfWork.NEW:null==(s=e.getInsertUrl())&&(s=this.getDi().get("url").get("baseUrl")+this.lcfirst(t)+"Insert"),this.ajax.setUrl(s);break;case UnitOfWork.CREATED:var s;null==(s=e.getUpdateUrl())&&(s=this.getDi().get("url").get("baseUrl")+this.lcfirst(t)+"Update"),this.ajax.setUrl(s)}var n=new Reflection,i=JSON.stringify(n.getAtttributeAsObjects(e)),r={};r[t]=i,this.ajax.setParams(r),this.ajax.setMethod(e.getMethod())}else if(e instanceof StaticModel)switch(e.state){case UnitOfWork.NEW:e.getData();break;case UnitOfWork.CREATED:}return this}delete(e){if(this.getContainer().set("transactionModel",e),this.getContainer().set("transactionObjectModel",e),this.getContainer().set("transactionType","delete"),e instanceof AjaxModel){this.ajax=new Ajax;var t=e.getClassName(),s=e.getDeleteUrl();null==s&&(s=this.getDi().get("url").get("baseUrl")+this.lcfirst(t)+"Delete"),this.ajax.setUrl(s);var n=new Reflection,i=JSON.stringify(n.getAtttributeAsObjects(e)),r={};r[t]=i,this.ajax.setParams(r),this.ajax.setMethod(e.getMethod())}else if(e instanceof StaticModel)switch(e.state){case UnitOfWork.NEW:e.getData();break;case UnitOfWork.CREATED:}return this}response(e){var t=this.getContainer().get("transactionModel"),s=this.getContainer().get("transactionObjModel"),n=this.getContainer().get("transactionType");if("save"==n||"delete"==n)this.ajax.response(function(i){return e(this.setResponse(i,s,n,t))}.bind(this)),this.ajax.send();else{if("find"==n||"findOne"==n||"count"==n)var i=this.getContainer().get("transactionParams");this.checkModel(e,n,t,s,i)}return this}checkModel(e,t,s,n,i){if(n instanceof AjaxModelPersistent){n.getData();null==n.getAjaxInit()?this.setResponseAjax(e,t,s,n,i):this.setResponseStatic(e,n,t,s,i)}else n instanceof AjaxModel?this.setResponseAjax(e,t,s,n,i):n instanceof StaticModel&&this.setResponseStatic(e,n,t,s,i)}setResponseAjax(e,t,s,n,i){this.ajax.response(function(r){return e(this.setResponse(r,n,t,s,i))}.bind(this)),this.ajax.send()}setResponseStatic(e,t,s,n,i){e(this.setResponse(t.getData(),t,s,n,i))}setResponse(e,t,s,n,i){let r=new Array;switch(s){case"count":case"findOne":0!=(r=this.getResultSet(e,i,n,t))&&(r=r[0]);break;case"find":r=this.getResultSet(e,i,n,t);break;case"delete":case"save":r=e}return r}getResultSet(e,t,s,n){let i=new Array,r=new Hydrator,a=new Filter;a.buildCondition(t);var l=new Array;n instanceof AjaxModelPersistent?(null==n.getAjaxInit()&&(n.setAjaxInit(!0),n.setData(e)),l=a.getMultipleRowValues(e,!1)):l=n instanceof AjaxModel?a.getMultipleRowValues(e,!1):a.getMultipleRowValues(e);var o=0;for(let e in l){let t=r.hydrate(s,l[e]);t instanceof StaticModel&&t.setIndex(o),i.push(t),o++}return 0==i.length&&(i=!1),i}flush(){return!1}reset(){return!1}group(){return{}}distinct(){return{}}purge(){return!1}forget(){return!1}checksum(e){for(var t,s=Object.keys(e).sort(),n=[],i=0;i<s.length;i++)t=s[i],n.push(t),n.push(e[t]);return JSON.stringify(n)}getClassName(){let e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}setDi(e){this.di=e}getDi(){return this.di}}class Filter{constructor(){this.first="",this.final=[],this.init=!1,this.sort=new Array,this.limit=null,this.columns={}}buildCondition(e){var t=1,s=Object.keys(e).length;for(var n in e)switch(n){case DatamapperOperators.CONDITIONAL:let r=e[n];for(var i in r)switch(i){case DatamapperOperators.AND:let e=1,t=r[i],s=Object.keys(t).length;for(let n in t)this.getExpression(n,t[n],ComparisonOperators.AND,e,s),e++;break;case DatamapperOperators.OR:let n=1,a=r[i],l=Object.keys(a).length;for(let e in a)this.getExpression(e,a[e],ComparisonOperators.OR,n,l),n++;break;case DatamapperOperators.IS_NOT:let o=1,c=r[i],h=Object.keys(c).length;for(let e in c)this.getExpression(e,c[e],ComparisonOperators.AND,o,h,ComparisonOperators.DIFFERENT),o++}break;case DatamapperOperators.SORT:this.getSort(e[n]);break;case DatamapperOperators.LIMIT:this.getLimit(e[n]);break;case DatamapperOperators.COLUMNS:if(this.columns=e[n],"object"!=typeof e[n])throw Message.getCodeMessage(MessageCode.NOT_VALID_OBJECT,"$columns option");break;default:this.getExpression(n,e[n],ComparisonOperators.AND,t,s),t++}}getSort(e){switch(typeof e){case DataType.STRING_TYPE:this.sort.push("data = Sort.sortByField('"+e+"');");break;case DataType.OBJECT_TYPE:if(Array.isArray(e))for(let t in e){let s=e[t];this.sort.push("data = Sort.sortByField(data, '"+s+"')")}else for(let t in e){e[t];this.sort.push("data = Sort.sortByField(data, '"+t+"');"),e[t]==Sort.DESC&&this.sort.push("data = data.reverse();")}}}getLimit(e){"string"==typeof e&&(e=parseInt(e)),this.limit="data = data.slice(0, "+e+") "}getExpression(e,t,s,n,i,r="=="){var a="",l="";if(this.init&&(l=s),Array.isArray(t))for(var o=t,c=0;c<o.length;c++){let t="";c<o.length-1&&(t=s);DataType.getValueByType(o[c]);a+='row["'+e+'"] '+r+" "+o[c]+" "+t+" "}else{a+='row["'+e+'"] '+r+" "+DataType.getValueByType(t)+"  "}this.first+=l+" ( "+a+" ) ",this.init=!0}getColumns(e){var t={};if(Object.keys(this.columns).length>0)for(let s in this.columns)t[this.columns[s]]=e[this.columns[s]];else t=e;return t}getMultipleRowValues(rsp,conds=!0){var response=JSON.parse(rsp);"string"==typeof response&&(response=JSON.parse(response)),""==this.first&&(this.first="true");var data=new Array;if(Array.isArray(response)){var conditions=this.first,evalValue="if ("+conditions+") { data.push(this.getColumns(row)); }";for(let key in response){let row=response[key];conds?eval(evalValue):data.push(this.getColumns(row))}if(this.sort.length>0){var i=0;for(let key in this.sort)eval(this.sort[key]),i++}null!=this.limit&&eval(this.limit)}else"object"==typeof response?data.push(this.getColumns(response)):console.log("Response is not an object");return data}getOneRowValue(e){}}class Hydrator{constructor(){}hydrate(e,t){var s=new e;s.state=UnitOfWork.CREATED;for(let e in t){switch(typeof s[e]){case"function":var n=new s[e];s[e]=n instanceof RawModel?this.hydrate(s[e],t[e]):t[e];break;default:new Array;if(Array.isArray(s[e]))switch(typeof s[e][0]){case"function":if(void 0!==t[e].length&&t[e].length>0){var i=new s[e][0],r=new Array;if(i instanceof RawModel){for(let n in t[e])r.push(this.hydrate(s[e][0],t[e][n]));s[e]=r}}break;default:s[e]=t[e]}else s[e]=t[e]}Array.isArray(s[e])&&"function"==typeof s[e][0]&&(s[e]=new Array)}return s}}class Sort{static get ASC(){return 1}static get DESC(){return-1}static sortByField(e,t){var s=[];for(var n in e){if(e.hasOwnProperty(n))(l={})[n]=e[n],l.tempSortName=e[n][t].toLowerCase(),s.push(l)}s.sort(function(e,t){var s=e.tempSortName,n=t.tempSortName;return s>n?1:s<n?-1:0});for(var i=[],r=0,a=s.length;r<a;r++){var l;delete(l=s[r]).tempSortName;for(var n in l)if(l.hasOwnProperty(n))var o=n;var c=l[o];i.push(c)}return i}}class UnitOfWork{static get NEW(){return 1}static get CREATED(){return 2}static get DELETED(){return 3}constructor(){this.detached=null,this.updated=null,this.deleted=null}}class Checksum{constructor(e=!1){"object"==typeof e&&this.set(e),this.stringObject=""}set(e){let t=new Reflection;this.stringObject=t.read(e)}utf8ToBase64(e){return window.btoa(encodeURIComponent(e))}getChecksum(){return this.utf8ToBase64(this.stringObject)}}class Reflection{constructor(){this.deny={insertUrl:!0,deleteUrl:!0,updateUrl:!0,findUrl:!0},this.method=new Array,this.attributes=new Array,this.deny={}}getName(e){let t=/function (.{1,})\(/,s=t.exec(e.constructor.toString());return s&&s.length>1?s[1]:""}read(e){if("object"!=typeof e)return void console.log("Not an object");let t="";for(let s in e){let n=s,i=e[s];switch(typeof i){case"function":t+=" [method] "+n+"\n\n",this.methods.push();break;case"object":t+="\t[object] "+n+" "+this.read(i)+"\n\n";break;default:t+=" [property] "+n+" "+i+"\n\n",this.attributes.push({propName:i})}}return t}getAtttributeAsObjects(e){if("object"!=typeof e)return void console.log("Not an object");let t={};for(let n in e){let i=n,r=e[n];switch(typeof r){case"function":break;case"object":r instanceof RawModel?t[i]=this.getAtttributeAsObjects(r):null!=r&&Object.keys(r).length>0&&this.checkDataObject(i)&&(t[i]=r);break;default:var s=Deny.getDeny();-1==s.indexOf(i)&&(t[i]=r)}}return t}checkDataObject(e){return 1!=this.deny[e]}getMethods(){return this.methods}getAttributes(){return this.attributes}}class InitializeComponents{inject(){Di.set("Chronos.Dom.CssManager",new CssManager),Di.set("Chronos.Dom.ParentManager",new ParentManager),Di.set("Chronos.Dom.ElementManager",new ElementManager),Di.set("dom",new DomManager),Di.set("eventManager",new EventManager),Di.set("ajax",new Ajax),Di.set("em",new EntityManager),Di.set("uuid",new Uuid),Di.set("url",new Url)}}class Application{constructor(e){this.config=e,this.fetchDi(),window.onbeforeunload=function(){sessionStorage.clear()}}fetchDi(){let e=new InitializeComponents;e.inject()}start(){this.fetchDi();let e=new Starter;e.setConfig(this.config),e.start()}}class ResolveController{constructor(e){this.controllers=e}resolveProperties(e){let t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));for(let s of t)switch(typeof e[s]){case"function":if(!ArrayHelper.inArray(Restricted.get(),s)){let t=document.getElementById(s);null!=t&&void 0!==t.nodeType&&e[s](new ViewModel)}}}resolve(){if(Array.isArray(this.controllers))for(let e in this.controllers){let t=new this.controllers[e](this.resolveProperties);t.initialize(),t instanceof Controller&&this.resolveProperties(t)}}}class ResolvePaths{constructor(e){this.paths=e,this.di=new Service}resolve(){for(let e in this.paths)this.di.get("url").set(e,this.paths[e])}}class ResolveService{constructor(e=!1){if(0==e)throw"Config : Service must be a json object";this.service=new e}resolve(){this.service.initialize(new Di)}}class Restricted{static get(){let e=["constructor","initialize","getById","getByTag","getByClass","getDi","hasKey","setPersistent","getPersistent","get","set","setDi","getUrl","setUrl","getAjax","setAjax","getDom","setDom","setEm","getEm","setEntityManager","getEntityManager","setContainer","getContainer","setTag","getTag","setEvent","getEvent","setGlobals","getGlobals"];return e}}class Starter{setScope(e){this.scope=e}getScope(){return this.scope}setControllers(e){this.controllers=e}getControllers(){return this.controllers}setConfig(e){this.config=e}getConfig(){return this.config.get()}setData(e){this.data=e}getData(){return this.data}resolvePath(){let e=this.getConfig();if(void 0===e.paths)throw"Config: item paths must be mandatory.";new ResolvePaths(e.paths).resolve()}resolveService(){let e=this.getConfig();void 0!==e.service&&new ResolveService(e.service).resolve()}resolveControllers(){let e=this.getConfig();if(void 0===e.controllers)throw"Config: item controllers must be mandatory.";new ResolveController(e.controllers).resolve()}start(){this.resolvePath(),this.resolveService(),this.resolveControllers()}}class Url extends Service{constructor(){super()}getQuery(e=!1){0==e&&(e=document.URL);var t=e?e.split("?")[1]:window.location.search.slice(1),s={};if(t)for(var n=(t=t.split("#")[0]).split("&"),i=0;i<n.length;i++){var r=n[i].split("="),a=void 0,l=r[0].replace(/\[\d*\]/,function(e){return a=e.slice(1,-1),""}),o=void 0===r[1]||r[1];s[l]?("string"==typeof s[l]&&(s[l]=[s[l]]),void 0===a?s[l].push(o):s[l][a]=o):s[l]=o}return s}}